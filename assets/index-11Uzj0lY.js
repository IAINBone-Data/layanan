import{j as e,H as we,C as Rt,a as le,M as De,P as Ae,I as zt,Y as Ue,L as je,A as Ce,W as ct,b as mt,d as ut,V as xt,U as Le,T as ht,e as pt,f as bt,h as gt,S as Pe,i as ft,k as wt,l as jt,m as X,n as Nt,o as vt,p as yt,q as se,r as Me,s as kt,K as Ct,t as St,F as Dt,u as Tt,D as Ft,v as It,w as At,x as Lt,B as Re,y as Pt,z as ze,E as Ne,G as V,J as Ee,N as He,O as Oe,Q as Ke,R as Ge,X as We,Z as Je,_ as qe,$ as ce,a0 as at,a1 as st,a2 as Te,a3 as c,a4 as Ht,a5 as lt,a6 as nt,a7 as J,a8 as Fe,a9 as Ie,aa as Qe,ab as Ot,ac as Kt,ad as ge,ae as Gt,af as Wt,ag as ke,ah as Se,ai as Be,aj as Jt,ak as qt,al as Et,am as $t,an as fe,ao as Qt,ap as Yt,aq as Vt,ar as _t,as as Bt,at as Xt,au as Zt,av as ea,aw as ta,ax as rt,ay as Ut,az as aa,aA as sa,aB as la,aC as na,aD as ra,aE as ia}from"./react-vendor-CX-qqhGw.js";import{E as oa}from"./pdf-lib-CIQnSFUk.js";import"./vendor-D76JIIl7.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const b of i.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&l(b)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}})();const da=({onLogoClick:a,showHomeButton:r})=>{const n=new Date,l=new Intl.DateTimeFormat("id-ID",{dateStyle:"full"}).format(n),t=new Intl.DateTimeFormat("id-ID",{calendar:"islamic",day:"numeric",month:"long",year:"numeric"}).format(n);return e.jsx("header",{className:"hidden md:block bg-white border-b border-slate-200 sticky top-0 z-40 shadow-sm",children:e.jsxs("div",{className:"container mx-auto px-4 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 cursor-pointer group",onClick:a,title:"Ke Halaman Utama",children:[e.jsx("img",{src:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEivDAkuxazRpasK-Kj0Tf1RXGNSrUoVyfvMyq-lXn_NBI2wXgCdjb1CBLGR7sC-r5cGU6njQnQ3TG551VMK03pSui50uEU5Ot8ScLiKskrcY-2yjuNt_xt8jnGcIjCPCtXN7yzb_9Me6G2ceSWv55vF_ZDTCk8tF0zseZ4fdrW764wiSlnBMLItY_4xdyY/s1600/logoiainbone%20-%20Copy%20%283%20%282%29.png",alt:"Logo IAIN Bone",className:"h-12 w-auto object-contain group-hover:scale-105 transition-transform duration-300"}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("h1",{className:"text-xl font-bold text-slate-800 leading-none mb-1 group-hover:text-emerald-600 transition-colors",children:"Layanan IAIN Bone"}),e.jsx("p",{className:"text-xs text-emerald-600 font-medium tracking-wide",children:"SISTEM PELAYANAN TERPADU"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[r&&e.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-full hover:bg-emerald-100 transition-colors font-semibold text-sm border border-emerald-100 shadow-sm",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Home"})]}),r&&e.jsx("div",{className:"h-8 w-px bg-slate-200"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right hidden lg:block",children:[e.jsxs("p",{className:"text-xs text-slate-500 font-medium",children:[t," H"]}),e.jsx("p",{className:"text-sm font-bold text-slate-700",children:l})]}),e.jsx("div",{className:"h-10 w-10 bg-slate-50 text-slate-400 rounded-full flex items-center justify-center border border-slate-200",children:e.jsx(Rt,{className:"w-5 h-5"})})]})]})]})})},ca=()=>e.jsxs("footer",{className:"mt-auto pt-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-800 via-emerald-600 to-lime-500 text-white py-6 px-4 sm:px-6 rounded-tl-[30px] rounded-tr-[30px] sm:rounded-tl-[50px] sm:rounded-tr-[50px] shadow-lg",children:e.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row items-center justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-3 md:gap-6 text-sm font-medium text-emerald-50 w-full md:w-auto",children:[e.jsxs("span",{className:"hidden md:flex items-center gap-2",title:"Jam Layanan",children:[e.jsx(le,{className:"w-4 h-4 text-lime-300"}),e.jsx("span",{children:"Jam Layanan : Senin - Kamis 08.30 s.d. 14.00 | Jumat 08.30 s.d. 14.30"})]}),e.jsxs("a",{href:"mailto:umum@iain-bone.ac.id",className:"flex items-center gap-2 hover:text-white transition-colors",title:"Email",children:[e.jsx(De,{className:"w-4 h-4 text-lime-300"}),"umum@iain-bone.ac.id"]}),e.jsxs("a",{href:"https://wa.me/6285117769733",target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 hover:text-white transition-colors",title:"WhatsApp",children:[e.jsx(Ae,{className:"w-4 h-4 text-lime-300"}),"+62 851-1776-9733"]})]}),e.jsxs("div",{className:"flex gap-4 items-center mt-1 md:mt-0",children:[e.jsx("a",{href:"https://www.instagram.com/layanan.iainbone/",target:"_blank",rel:"noreferrer",className:"p-1.5 bg-white/10 rounded-full hover:bg-white/30 transition text-white",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("a",{href:"https://www.youtube.com/@layanan.iainbone",target:"_blank",rel:"noreferrer",className:"p-1.5 bg-white/10 rounded-full hover:bg-white/30 transition text-white",children:e.jsx(Ue,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"bg-emerald-900 h-3 w-full"})]}),it=[{bg:"#FEE2E2",text:"#DC2626"},{bg:"#FFEDD5",text:"#EA580C"},{bg:"#FEF3C7",text:"#D97706"},{bg:"#DCFCE7",text:"#16A34A"},{bg:"#D1FAE5",text:"#059669"},{bg:"#CCFBF1",text:"#0D9488"},{bg:"#CFFAFE",text:"#0891B2"},{bg:"#DBEAFE",text:"#2563EB"},{bg:"#E0E7FF",text:"#4F46E5"},{bg:"#EDE9FE",text:"#7C3AED"},{bg:"#F3E8FF",text:"#9333EA"},{bg:"#FAE8FF",text:"#C026D3"},{bg:"#FCE7F3",text:"#DB2777"},{bg:"#FFE4E6",text:"#E11D48"}],ma=a=>{const n=(typeof a=="number"?a:a?a.length+a.charCodeAt(0):0)%it.length;return it[n]},ot=({name:a,isCompact:r,className:n})=>{const t=`${r?"w-8 h-8":"w-5 h-5 sm:w-6 sm:h-6"} ${n||""}`,i={GraduationCap:Te,Stamp:st,PauseCircle:at,FileText:ce,Clock:le,ArrowRight:Ce,LinkIcon:je,Home:we,Monitor:qe,BookOpen:Je,Library:We,Server:Ge,UserPlus:Ke,CreditCard:Oe,Users:He,Phone:Ae,Mail:De,MapPin:Ee,Calendar:V,CheckCircle:Ne,Award:ze,Bell:Pt,Briefcase:Re,Calculator:Lt,Camera:At,Cloud:It,Database:Ft,Flag:Tt,Folder:Dt,Image:St,Key:Ct,Layout:kt,Lock:Me,MessageCircle:se,Music:yt,PenTool:vt,Printer:Nt,Search:X,Settings:jt,Shield:wt,ShoppingCart:ft,Star:Pe,Tablet:gt,Tag:bt,Terminal:pt,Truck:ht,User:Le,Video:xt,Wifi:ut,Car:mt,Wrench:ct},b=a?a.charAt(0).toUpperCase()+a.slice(1):"";let o=i[b]||i[a];return o||(a==="FaGraduationCap"?o=Te:a==="FaStamp"?o=st:a==="FaPauseCircle"?o=at:a==="Home"?o=we:o=ce),e.jsx(o,{className:t})},ua=({service:a,isCompact:r=!1})=>{if(!a)return null;const n=a.jenis&&a.jenis.toString().toLowerCase()==="link"||a.form_type&&a.form_type.toString().toLowerCase()==="link",l=ma(a.id||a.jenis_layanan);if(r){let b=a.jenis_layanan||"Layanan";return b.includes("Surat Keterangan")&&(b=b.replace("Surat Keterangan","Suket")),e.jsxs("div",{className:"group bg-white rounded-xl p-4 border border-slate-100 shadow-sm hover:shadow-md transition-all duration-300 h-full flex flex-col items-center justify-center text-center gap-3 hover:-translate-y-1 relative overflow-hidden cursor-pointer",children:[e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 rounded-bl-full -mr-6 -mt-6 transition-transform group-hover:scale-150 opacity-20",style:{backgroundColor:l.text}}),e.jsx("div",{className:"p-3 rounded-[15px] transition-colors duration-300 relative z-10 shadow-sm",style:{backgroundColor:l.bg,color:l.text},children:e.jsx(ot,{name:a.icon,isCompact:!0})}),e.jsx("h3",{className:"text-[10px] sm:text-xs font-medium text-slate-800 line-clamp-2 leading-tight group-hover:text-emerald-600 relative z-10",children:b})]})}const i=(b=>{const o=b?b.toLowerCase():"";return o.includes("akademik")?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-blue-200":o.includes("fakultas")?"bg-gradient-to-r from-violet-500 to-purple-500 text-white shadow-purple-200":o.includes("kemahasiswaan")||o.includes("mahasiswa")?"bg-gradient-to-r from-orange-500 to-amber-500 text-white shadow-orange-200":o.includes("umum")||o.includes("rumah tangga")?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-emerald-200":o.includes("keuangan")?"bg-gradient-to-r from-rose-500 to-pink-500 text-white shadow-rose-200":"bg-gradient-to-r from-slate-500 to-gray-500 text-white shadow-slate-200"})(a.unit);return e.jsxs("div",{className:"group bg-white rounded-xl p-4 sm:p-6 border border-slate-100 shadow-sm hover:shadow-lg transition-all duration-300 h-full flex flex-col relative overflow-hidden hover:-translate-y-1",children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-16 h-16 sm:w-24 sm:h-24 rounded-full opacity-20 group-hover:opacity-30 transition-opacity duration-500",style:{background:`linear-gradient(to bottom right, ${l.bg}, transparent)`}}),e.jsxs("div",{className:"flex items-start justify-between mb-3 relative z-10",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-[15px] transition-colors duration-300 shadow-sm",style:{backgroundColor:l.bg,color:l.text},children:e.jsx(ot,{name:a.icon,isCompact:!1})}),a.unit&&e.jsx("span",{className:`text-[9px] sm:text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-md shadow-sm ${i}`,children:a.unit})]}),e.jsx("h3",{className:"text-sm sm:text-lg font-bold text-slate-800 mb-1 sm:mb-2 group-hover:text-emerald-600 transition-colors relative z-10 leading-tight",children:a.jenis_layanan||"Layanan"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 line-clamp-2 sm:line-clamp-3 mb-3 sm:mb-5 flex-grow relative z-10 leading-relaxed",children:a.keterangan||"-"}),e.jsxs("div",{className:"pt-3 border-t border-slate-50 flex items-center justify-between mt-auto relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs font-medium text-slate-400",children:[e.jsx(le,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[80px] sm:max-w-none",children:a.waktu||"Standar"})]}),e.jsxs("span",{className:"flex items-center gap-1 text-[10px] sm:text-xs font-bold text-emerald-600 transition-all duration-300",children:[e.jsx("span",{className:"hidden sm:inline opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all",children:n?"Buka":"Buat"}),n?e.jsx(je,{className:"w-3 h-3 sm:w-4 sm:h-4 text-emerald-500 sm:text-emerald-600"}):e.jsx(Ce,{className:"w-3 h-3 sm:w-4 sm:h-4 text-emerald-500 sm:text-emerald-600"})]})]})]})},de="https://script.google.com/macros/s/AKfycbzQ4JxHEhqeQOA0oJPTl6fXHIMnnll3Q9yGjCI5UkwO1HfzAQTRrpmDgGThvF6THFam/exec",dt=()=>"/",be={getServices:async()=>{try{const r=await(await fetch(`${de}?action=getServices&t=${new Date().getTime()}`)).json();return r.status==="success"?r.data:[]}catch(a){return console.error("Gagal load layanan:",a),[]}},getFormConfig:async()=>{try{const r=await(await fetch(`${de}?action=getFormConfig&t=${new Date().getTime()}`)).json();return r.status==="success"?r.data:{}}catch(a){return console.error("Gagal load form config:",a),{}}},getAppContent:async()=>{try{const a=`${dt()}data/content.json?t=${new Date().getTime()}`,r=await fetch(a);if(!r.ok){console.warn("Static content.json not found, fetching from API...");const i=await(await fetch(`${de}?action=getAppContent`)).json();return i.status==="success"?i.data:{sliders:[],quickLinks:[],momentLinks:[],popups:[]}}const n=await r.text();if(!n)throw new Error("File content.json kosong");const l=JSON.parse(n);return l.status==="success"&&l.data?l.data:l}catch(a){return console.error("Gagal load konten statis:",a),{sliders:[],quickLinks:[],momentLinks:[],popups:[]}}},trackTicket:async a=>{try{return await(await fetch(`${de}?action=trackTicket&id=${a}`)).json()}catch{return{status:"error",message:"Gagal koneksi"}}},getCalendarData:async a=>{try{return await(await fetch(`${de}?action=getCalendarData&serviceId=${a}&t=${new Date().getTime()}`)).json()}catch(r){return console.error("Gagal load kalender:",r),{status:"error",message:"Gagal koneksi"}}},getFAQ:async()=>{try{const a=`${dt()}data/faq.json?t=${new Date().getTime()}`,r=await fetch(a);if(r.ok){const t=await r.json();return t.status==="success"?t.data:t}const l=await(await fetch(`${de}?action=getFAQ`)).json();return l.status==="success"?l.data:[]}catch(a){return console.error("Gagal load FAQ:",a),[]}},submitApplication:async(a,r,n)=>{try{let l="";n&&n instanceof File&&(l=await xa(n));const t={action:"submitApplication",serviceInfo:{id:r.id,name:r.name||r.jenis_layanan,folderId:r.folderId||r.folder_drive_id},userInput:a,fileName:n?n.name:"",mimeType:n?n.type:"",fileData:l?l.split(",")[1]:"",finalFileName:`${a.identitas||"Dokumen"}_${r.jenis_layanan||"Layanan"}_${n?n.name:""}`};return await(await fetch(de,{method:"POST",body:JSON.stringify(t)})).json()}catch(l){throw console.error("Gagal submit:",l),l}}},xa=a=>new Promise((r,n)=>{const l=new FileReader;l.readAsDataURL(a),l.onload=()=>r(l.result),l.onerror=t=>n(t)}),Ye="LAYANAN IAIN BONE",Ve="Pusat Layanan Terpadu Institut Agama Islam Negeri Bone",Xe="BUKTI REGISTRASI LAYANAN",Ze="KODE PELACAKAN ANDA:",ha=`Gunakan KODE PELACAKAN ini pada Bagian Pelacakan di Halaman Utama,
dan Pantau secara Rutin sesuai Norma Waktu Layanan`,et="Dokumen ini sah dan diterbitkan secara elektronik oleh Sistem Layanan IAIN Bone.",tt=["1. Simpan bukti ini sebagai tanda terima layanan.","2. Harap membawa dokumen asli saat pengambilan (jika diperlukan).","3. Pantau status layanan secara berkala melalui halama utama layanan.iain-bone.ac.id","4. Hubungi petugas jika ada kendala dalam proses layanan."],pa=(a,r,n,l)=>{try{const t=new oa,i=t.internal.pageSize.getWidth(),b=t.internal.pageSize.getHeight(),o=20;let d=20;t.setTextColor(30,41,59),t.setFontSize(16),t.setFont("helvetica","bold"),t.text(Ye,i/2,d+6,{align:"center"}),t.setFontSize(12),t.setFont("helvetica","normal"),t.setTextColor(100,116,139),t.text(Ve,i/2,d+12,{align:"center"}),d+=25,t.setDrawColor(226,232,240),t.setLineWidth(.5),t.line(o,d,i-o,d),d+=15,t.setFontSize(14),t.setFont("helvetica","bold"),t.setTextColor(15,23,42),t.text(Xe,o,d),d+=10;const y=50;t.setFillColor(236,253,245),t.setDrawColor(16,185,129),t.setLineWidth(.2),t.roundedRect(o,d,i-o*2,y,3,3,"FD"),t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(5,150,105),t.text(Ze,i/2,d+12,{align:"center"}),t.setFontSize(24),t.setFont("helvetica","bold"),t.setTextColor(6,78,59),t.text(a,i/2,d+26,{align:"center"}),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(5,150,105);const x=t.splitTextToSize(ha,150);t.text(x,i/2,d+38,{align:"center"}),d+=y+20,t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(15,23,42),t.text("Detail Permohonan:",o,d),d+=8,t.setFontSize(10),t.setTextColor(51,65,85);const k=[{label:"Tanggal",value:new Date().toLocaleString("id-ID")},{label:"Layanan",value:r},{label:"Unit Tujuan",value:l||"-"},{label:"Nama Pemohon",value:n.nama||n.nama_lengkap||"-"},{label:"Identitas",value:n.identitas||n.nim||n.nip||"-"}],j=50,R=o+j,F=8;k.forEach(N=>{t.setFont("helvetica","bold"),t.text(N.label,o,d),t.text(":",o+j-5,d),t.setFont("helvetica","normal");const A=t.splitTextToSize(String(N.value),i-R-o);t.text(A,R,d),d+=A.length*F}),d+=5,t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(15,23,42),t.text("Catatan:",o,d),d+=6,t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(51,65,85),tt.forEach(N=>{const A=t.splitTextToSize(N,i-o*2);t.text(A,o,d),d+=A.length*6});const L=b-30;return t.setDrawColor(245,158,11),t.setFillColor(255,251,235),t.setLineWidth(.3),t.roundedRect(o,L,i-o*2,15,2,2,"FD"),t.setFontSize(9),t.setTextColor(180,83,9),t.setFont("helvetica","bold"),t.text("Bantu kami meningkatkan kualitas layanan dengan mengisi survei kepuasan di:",i/2,L+6,{align:"center"}),t.setTextColor(37,99,235),t.setFont("courier","bold"),t.text("layanan.iain-bone.ac.id/survei",i/2,L+11,{align:"center"}),t.setFontSize(7),t.setFont("helvetica","italic"),t.setTextColor(148,163,184),t.text(et,i/2,b-8,{align:"center"}),t.save(`Bukti_Registrasi_${a}.pdf`),!0}catch(t){return console.error("Error generating PDF:",t),!1}},ba=(a,r,n,l)=>`*${Ye}*
${Ve}

*${Xe}*

*${Ze}*
*${a}*

Gunakan KODE PELACAKAN ini pada Bagian Pelacakan di Halaman Utama.

*Detail Permohonan:*
Tanggal: ${new Date().toLocaleString("id-ID")}
Layanan: ${r}
Unit Tujuan: ${l}
Nama Pemohon: ${n.nama||n.nama_lengkap||"-"}
Identitas: ${n.identitas||n.nim||n.nip||"-"}

*Catatan:*
${tt.join(`
`)}

_${et}_`,ga=(a,r,n,l)=>{const t=`Bukti Registrasi Layanan IAIN Bone - ${a}`,i=`${Ye}
${Ve}

${Xe}

${Ze} ${a}

Gunakan KODE PELACAKAN ini pada Bagian Pelacakan di Halaman Utama.

Detail Permohonan:
Tanggal: ${new Date().toLocaleString("id-ID")}
Layanan: ${r}
Unit Tujuan: ${l}
Nama Pemohon: ${n.nama||n.nama_lengkap||"-"}
Identitas: ${n.identitas||n.nim||n.nip||"-"}

Catatan:
${tt.join(`
`)}

${et}`;return{subject:t,body:i}},fa=({isOpen:a,onClose:r,events:n=[],loading:l=!1,error:t=null})=>{const[i,b]=c.useState(new Date),[o,d]=c.useState(window.innerWidth<640?"agenda":"month"),[y,x]=c.useState([]),[k,j]=c.useState("Semua Unit"),[R,F]=c.useState([]),[L,N]=c.useState("Semua"),[A,q]=c.useState(null),g=m=>{const h=["bg-red-500 text-white border-red-600 hover:bg-red-600","bg-blue-500 text-white border-blue-600 hover:bg-blue-600","bg-emerald-500 text-white border-emerald-600 hover:bg-emerald-600","bg-amber-500 text-white border-amber-600 hover:bg-amber-600","bg-violet-500 text-white border-violet-600 hover:bg-violet-600","bg-pink-500 text-white border-pink-600 hover:bg-pink-600","bg-indigo-500 text-white border-indigo-600 hover:bg-indigo-600","bg-teal-100 text-teal-700 border-teal-200"];let f=0;for(let T=0;T<m.length;T++)f=m.charCodeAt(T)+((f<<5)-f);const D=Math.abs(f)%h.length;return h[D]},S=m=>{const h=m.toLowerCase();return h.includes("kendaraan")||h.includes("mobil")||h.includes("bus")||h.includes("motor")?e.jsx(mt,{className:"w-3 h-3 shrink-0"}):h.includes("tempat")||h.includes("ruang")||h.includes("gedung")||h.includes("aula")?e.jsx(Fe,{className:"w-3 h-3 shrink-0"}):e.jsx(Ot,{className:"w-3 h-3 shrink-0"})};c.useEffect(()=>{if(n&&n.length>0){const m=[...new Set(n.map(h=>h.unit))].filter(Boolean).sort();x(["Semua Unit",...m]),j("Semua Unit")}else x([])},[n]),c.useEffect(()=>{let m=n;k&&k!=="Semua Unit"&&(m=n.filter(f=>f.unit===k));const h=[...new Set(m.map(f=>f.type))].filter(Boolean).sort();F(h),N("Semua")},[k,n]);const P=m=>{if(n.length===0)return[];const h=new Date(i.getFullYear(),i.getMonth(),m);return h.setHours(0,0,0,0),n.filter(D=>{if(k!=="Semua Unit"&&D.unit!==k||L!=="Semua"&&D.type!==L)return!1;const T=new Date(D.start),_=new Date(D.end);if(isNaN(T.getTime())||isNaN(_.getTime()))return!1;const I=new Date(T);I.setHours(0,0,0,0);const z=new Date(_);return z.setHours(0,0,0,0),h.getTime()>=I.getTime()&&h.getTime()<=z.getTime()}).sort((D,T)=>{const _=new Date(D.start).getTime(),I=new Date(T.start).getTime();return _!==I?_-I:0})},Q=(m,h)=>{if(h.length>0){const f=new Date(i.getFullYear(),i.getMonth(),m).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"});q({date:f,events:h})}},ee=()=>{b(new Date)};if(!a)return null;const ne=m=>{const h=m.getFullYear(),f=m.getMonth(),D=new Date(h,f+1,0).getDate();let T=new Date(h,f,1).getDay();return T=T===0?6:T-1,{days:D,firstDay:T}},Z=m=>{const h=new Date(i.getFullYear(),i.getMonth()+m,1);b(h)},{days:te,firstDay:K}=ne(i),$=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],G=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],O=["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],W=m=>{const f=new Date(i.getFullYear(),i.getMonth(),m).getDay();return f===0||f===5},E=()=>{const m=[];for(let h=1;h<=te;h++){const f=P(h);f.length>0&&m.push({day:h,events:f})}return m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[e.jsx(V,{className:"w-12 h-12 mb-2 opacity-20"}),e.jsx("p",{className:"text-sm font-medium",children:"Tidak ada kegiatan bulan ini."})]}):e.jsx("div",{className:"space-y-4 pb-20",children:m.map(({day:h,events:f})=>{const D=new Date(i.getFullYear(),i.getMonth(),h),T=new Date().toDateString()===D.toDateString(),_=W(h);return e.jsxs("div",{className:`bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm ${_?"bg-red-50/30":""}`,children:[e.jsx("div",{className:`px-4 py-2 border-b border-slate-100 flex justify-between items-center ${T?"bg-emerald-50":"bg-slate-50"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-bold ${T?"text-emerald-700":_?"text-red-600":"text-slate-700"}`,children:D.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long"})}),T&&e.jsx("span",{className:"text-[10px] bg-emerald-600 text-white px-2 py-0.5 rounded-full font-bold",children:"Hari Ini"})]})}),e.jsx("div",{className:"divide-y divide-slate-100",children:f.map((I,z)=>e.jsxs("div",{onClick:()=>Q(h,f),className:"p-3 hover:bg-slate-50 active:bg-slate-100 transition cursor-pointer flex gap-3",children:[e.jsx("div",{className:"flex flex-col items-center pt-1 gap-1 min-w-[40px]",children:e.jsx("div",{className:"text-slate-400 p-1.5 bg-slate-100 rounded-lg",children:S(I.type)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded border uppercase font-bold tracking-wider ${g(I.type)}`,children:I.type}),e.jsxs("span",{className:"text-[10px] text-slate-400 font-mono flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"}),I.allDay?"Seharian":`${new Date(I.start).getHours()}:${String(new Date(I.start).getMinutes()).padStart(2,"0")} - ${new Date(I.end).getHours()}:${String(new Date(I.end).getMinutes()).padStart(2,"0")}`]})]}),e.jsx("h4",{className:"text-sm font-bold text-slate-800 truncate",children:I.applicant}),e.jsx("p",{className:"text-xs text-slate-500 truncate mb-1",children:I.title}),e.jsxs("div",{className:"text-[10px] text-slate-400 bg-slate-50 px-2 py-1 rounded inline-block",children:[new Date(I.start).toLocaleDateString("id-ID",{day:"numeric",month:"short"})," - ",new Date(I.end).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]})]})]},z))})]},h)})})};return e.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-0 sm:p-4 animate-fade-in",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/70 backdrop-blur-sm",onClick:r}),e.jsxs("div",{className:"relative w-full h-full sm:w-[70%] sm:h-[95%] bg-white sm:rounded-xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b border-slate-100 flex flex-col lg:flex-row lg:items-center justify-between gap-3 bg-slate-50 shrink-0",children:[e.jsxs("div",{className:"flex sm:hidden items-center justify-between gap-2 w-full",children:[e.jsxs("div",{className:"flex bg-slate-100 p-0.5 rounded-lg shrink-0",children:[e.jsxs("button",{onClick:()=>d("month"),className:`px-3 py-1.5 text-[10px] font-bold rounded-md transition flex items-center gap-1 ${o==="month"?"bg-white shadow-sm text-emerald-600":"text-slate-500"}`,children:[e.jsx(V,{className:"w-10.5 h-4"})," BLN"]}),e.jsxs("button",{onClick:()=>d("agenda"),className:`px-3 py-1.5 text-[10px] font-bold rounded-md transition flex items-center gap-1 ${o==="agenda"?"bg-white shadow-sm text-emerald-600":"text-slate-500"}`,children:[e.jsx(Ht,{className:"w-10.5 h-4"})," AGD"]})]}),e.jsxs("div",{className:"flex items-center bg-white rounded-lg border border-slate-200 shadow-sm flex-1 justify-center",children:[e.jsx("button",{onClick:()=>Z(-1),className:"p-1.5 hover:bg-slate-100 rounded-l-lg transition text-slate-600",children:e.jsx(lt,{className:"w-4 h-4"})}),e.jsxs("span",{className:"font-bold text-slate-700 text-xs px-2 whitespace-nowrap",children:[G[i.getMonth()]," ",i.getFullYear()]}),e.jsx("button",{onClick:()=>Z(1),className:"p-1.5 hover:bg-slate-100 rounded-r-lg transition text-slate-600",children:e.jsx(nt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center justify-between lg:justify-start gap-4 w-full lg:w-auto",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(V,{className:"w-5 h-5 text-emerald-600 hidden sm:block"})}),e.jsxs("div",{className:"flex items-center bg-white rounded-lg border border-slate-200 shadow-sm",children:[e.jsx("button",{onClick:()=>Z(-1),className:"p-1.5 hover:bg-slate-100 rounded-l-lg transition text-slate-600",children:e.jsx(lt,{className:"w-4 h-4"})}),e.jsxs("span",{className:"font-bold text-slate-700 text-sm px-3 min-w-[100px] text-center",children:[$[i.getMonth()]," ",i.getFullYear()]}),e.jsx("button",{onClick:()=>Z(1),className:"p-1.5 hover:bg-slate-100 rounded-r-lg transition text-slate-600",children:e.jsx(nt,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:r,className:"lg:hidden p-2 hover:bg-slate-200 rounded-full text-slate-500 transition",children:e.jsx(J,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full lg:w-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-row items-center gap-2 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto bg-white border border-slate-200 rounded-lg px-2 py-1.5",children:[e.jsx(Fe,{className:"w-3.5 h-3.5 text-slate-400"}),e.jsxs("select",{value:k,onChange:m=>j(m.target.value),className:"text-xs font-medium text-slate-700 bg-transparent outline-none w-full sm:w-40 cursor-pointer",children:[y.length===0&&e.jsx("option",{value:"",children:"Tidak ada data"}),y.map(m=>e.jsx("option",{value:m,children:m},m))]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto bg-white border border-slate-200 rounded-lg px-2 py-1.5",children:[e.jsx(Ie,{className:"w-3.5 h-3.5 text-slate-400"}),e.jsxs("select",{value:L,onChange:m=>N(m.target.value),className:"text-xs font-medium text-slate-700 bg-transparent outline-none w-full sm:w-32 cursor-pointer",disabled:!k,children:[e.jsx("option",{value:"Semua",children:"Semua Aset"}),R.map(m=>e.jsx("option",{value:m,children:m},m))]})]})]}),e.jsxs("div",{className:"hidden sm:flex gap-2 w-auto",children:[e.jsx("button",{onClick:ee,className:"flex-1 sm:flex-none px-3 py-1.5 bg-emerald-50 text-emerald-700 font-bold text-xs rounded-lg hover:bg-emerald-100 border border-emerald-200 transition whitespace-nowrap",children:"Hari Ini"}),e.jsx("button",{onClick:r,className:"hidden lg:flex p-1.5 hover:bg-slate-200 rounded-full text-slate-500 transition bg-white shadow-sm border border-slate-200",title:"Tutup",children:e.jsx(J,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex sm:hidden gap-2 w-full mt-1",children:[e.jsx("button",{onClick:ee,className:"flex-1 px-3 py-2 bg-emerald-50 text-emerald-700 font-bold text-xs rounded-lg hover:bg-emerald-100 border border-emerald-200 transition whitespace-nowrap",children:"Hari Ini"}),e.jsx("button",{onClick:r,className:"flex-1 px-3 py-2 bg-red-100 text-red-600 font-bold text-xs rounded-lg hover:bg-slate-200 border border-slate-200 transition whitespace-nowrap",children:"Tutup"})]})]})]}),e.jsx("div",{className:"flex-1 p-2 sm:p-4 bg-slate-50/50 flex flex-col h-full overflow-hidden",children:l?e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[e.jsx(Qe,{className:"w-10 h-10 text-emerald-500 animate-spin"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium mt-3",children:"Memuat data jadwal..."})]}):t?e.jsx("div",{className:"flex flex-col items-center justify-center flex-1",children:e.jsxs("div",{className:"text-center py-6 px-8 text-red-600 bg-red-50 rounded-2xl border border-red-100 shadow-sm max-w-sm",children:[e.jsx("p",{className:"font-bold mb-1",children:"Gagal Memuat Data"}),e.jsx("p",{className:"text-sm opacity-90",children:t})]})}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:`bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col flex-1 ${o==="month"?"flex":"hidden sm:flex"}`,children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-slate-100 bg-slate-50/50 shrink-0",children:O.map((m,h)=>{const f=h===4||h===6;return e.jsxs("div",{className:`py-2 text-center text-[10px] sm:text-xs font-bold uppercase tracking-wider ${f?"text-red-500":"text-slate-500"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:m}),e.jsx("span",{className:"sm:hidden",children:m.substring(0,3)})]},m)})}),e.jsxs("div",{className:"grid grid-cols-7 grid-rows-5 flex-1 bg-slate-100 gap-px",children:[Array.from({length:K}).map((m,h)=>e.jsx("div",{className:"bg-white min-h-0 flex flex-col"},`empty-${h}`)),Array.from({length:te}).map((m,h)=>{const f=h+1,D=P(f),T=new Date(i.getFullYear(),i.getMonth(),f),_=new Date().toDateString()===T.toDateString(),I=W(f);return e.jsxs("div",{onClick:()=>Q(f,D),className:`p-1 flex flex-col relative transition-colors cursor-pointer hover:bg-slate-50 group min-h-0 overflow-hidden
                                            ${_?"bg-emerald-50/30":I?"bg-red-50/30":"bg-white"}`,children:[e.jsx("div",{className:"flex justify-between items-start shrink-0 mb-0.5",children:e.jsx("span",{className:`text-[10px] sm:text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full
                                                ${_?"bg-emerald-600 text-white shadow-md":I?"text-red-600":"text-slate-700"}`,children:f})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-0.5 overflow-hidden",children:[D.slice(0,2).map((z,re)=>{const ve=g(z.type),ie=new Date(z.start);ie.setHours(0,0,0,0);const me=new Date(z.end);me.setHours(0,0,0,0);const oe=T.getTime(),ue=oe===ie.getTime(),p=oe===me.getTime(),C=`
                                                    ${ue?"rounded-l-sm ml-0 border-l":"rounded-l-none -ml-1.5 sm:-ml-2 border-l-0"} 
                                                    ${p?"rounded-r-sm mr-0 border-r":"rounded-r-none -mr-1.5 sm:-mr-2 border-r-0"}
                                                `;return e.jsx("div",{className:`text-[8px] sm:text-[9px] py-0.5 px-1 truncate border ${ve} flex items-center gap-1 font-bold shadow-sm relative z-10 ${C}`,children:ue||new Date(oe).getDay()===0?e.jsxs(e.Fragment,{children:[S(z.type),e.jsx("span",{className:"truncate",children:z.applicant||z.title})]}):"Â "},re)}),D.length>2&&e.jsxs("span",{className:"text-[8px] text-slate-400 font-medium pl-1 block",children:["+",D.length-2]})]})]},f)}),Array.from({length:Math.max(0,35-(te+K))}).map((m,h)=>e.jsx("div",{className:"bg-white min-h-0"},`end-empty-${h}`))]})]}),e.jsx("div",{className:`h-full overflow-y-auto ${o==="agenda"?"block":"hidden sm:hidden"}`,children:E()})]})}),A&&e.jsx("div",{className:"absolute inset-0 z-[80] bg-slate-900/20 backdrop-blur-[2px] flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-2xl overflow-hidden border border-slate-100 flex flex-col max-h-[80%] animate-scale-up",children:[e.jsxs("div",{className:"bg-slate-50 px-5 py-3 border-b border-slate-100 flex justify-between items-center shrink-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-0.5",children:"Detail Jadwal"}),e.jsx("h4",{className:"text-base font-bold text-slate-800",children:A.date})]}),e.jsx("button",{onClick:()=>q(null),className:"p-1.5 bg-white hover:bg-red-50 text-slate-400 hover:text-red-500 rounded-full border border-slate-200 transition",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto space-y-3",children:A.events.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:e.jsx("p",{className:"text-sm",children:"Tidak ada jadwal peminjaman."})}):A.events.map((m,h)=>e.jsxs("div",{className:"bg-white border border-slate-100 rounded-xl p-3 shadow-sm hover:shadow-md transition-shadow relative overflow-hidden group",children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${g(m.type).split(" ")[0].replace("bg-","bg-").replace("100","500")}`}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[e.jsx(V,{className:"w-3 h-3 text-slate-400"}),e.jsxs("span",{className:"text-[10px] text-slate-600 font-medium",children:[new Date(m.start).toLocaleDateString("id-ID",{day:"numeric",month:"short"})," - ",new Date(m.end).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]})]}),e.jsxs("div",{className:"flex justify-between items-start pl-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[S(m.type),e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded border uppercase tracking-wider ${g(m.type)}`,children:m.type})]}),m.allDay?e.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded-full",children:"Seharian"}):e.jsxs("span",{className:"text-[10px] font-bold text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"}),new Date(m.start).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})," - ",new Date(m.end).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"pl-2 space-y-0.5",children:[e.jsxs("h5",{className:"font-bold text-slate-800 text-sm flex items-center gap-1.5",children:[e.jsx(Le,{className:"w-3.5 h-3.5 text-slate-400 shrink-0"}),m.applicant]}),e.jsx("p",{className:"text-xs text-slate-500 flex items-start gap-1.5 ml-5 leading-relaxed",children:m.title}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5 pt-1.5 border-t border-slate-50",children:[e.jsx(Ee,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{className:"text-[10px] font-medium text-slate-600 truncate",children:m.unit})]})]})]},h))})]})})]})]})},wa=["Tata Usaha, Perlengkapan dan Rumah Tangga Institut","Layanan Akademik Institut","Fungsi Organisasi, Kepegawaian dan Hukum","Fungsi Perencanaan","Fungsi Keuangan","Fakultas Syariah dan Hukum Islam","Fakultas Tarbiyah","Fakultas Ekonomi dan Bisnis Islam","Fakultas Ushuluddin dan Dakwah","Pascasarjana","Lembaga Penjaminan Mutu","Lembaga Penelitian dan Pengabdian Masyarakat","Satuan Pengawasan Internal","UPT TIPD","UPT Perpustakaan","UPT Bahasa","UPT Mahad Al Jamiah"],_e={"Hukum Keluarga Islam":"Fakultas Syariah dan Hukum Islam","Hukum Tatanegara":"Fakultas Syariah dan Hukum Islam","Hukum Ekonomi Syariah":"Fakultas Syariah dan Hukum Islam","Pendidikan Agama Islam":"Fakultas Tarbiyah","Pendidikan Bahasa Arab":"Fakultas Tarbiyah","Tadris Bahasa Inggris":"Fakultas Tarbiyah","Manajemen Pendidikan Islam":"Fakultas Tarbiyah","Pendidikan Guru Madrasah Ibtidaiyah":"Fakultas Tarbiyah","Pendidikan Islam Anak Usia Dini":"Fakultas Tarbiyah","S3 Pendidikan Agama Islam":"Pascasarjana","S2 Pendidikan Agama Islam":"Pascasarjana","S2 Pendidikan Bahasa Arab":"Pascasarjana","S2 Ekonomi Syariah":"Pascasarjana","S2 Hukum Keluarga Islam":"Pascasarjana","S2 Hukum Tatanegara":"Pascasarjana","Ilmu Al-Qur'an Dan Tafsir":"Fakultas Ushuluddin dan Dakwah","Komunikasi Dan Penyiaran Islam":"Fakultas Ushuluddin dan Dakwah","Bimbingan Penyuluhan Islam":"Fakultas Ushuluddin dan Dakwah","Ekonomi Syariah":"Fakultas Ekonomi dan Bisnis Islam","Perbankan Syariah":"Fakultas Ekonomi dan Bisnis Islam","Akuntansi Syariah":"Fakultas Ekonomi dan Bisnis Islam","Manajemen Bisnis Syariah":"Fakultas Ekonomi dan Bisnis Islam"},ja=["I (Satu)","II (Dua)","III (Tiga)","IV (Empat)","V (Lima)","VI (Enam)","VII (Tujuh)","VIII (Delapan)","IX (Sembilan)","X (Sepuluh)","XI (Sebelas)","XII (Dua Belas)","XIII (Tiga Belas)","XIV (Empat Belas)"],Na=()=>{const a=new Date().getFullYear(),r=[];for(let n=-3;n<=1;n++){const l=a+n,t=l+1;r.push(`${l}/${t}`)}return r.reverse()},va=({service:a,onBack:r,templates:n,initialData:l,existingTicketId:t})=>{const[i,b]=c.useState([]),o=n&&n[a.form_type]?n[a.form_type]:n&&n.standard?n.standard:[],[d,y]=c.useState({}),[x,k]=c.useState("idle"),[j,R]=c.useState(""),[F,L]=c.useState(!1),[N,A]=c.useState({}),[q,g]=c.useState(0),[S,P]=c.useState({isOpen:!1,type:"",value:""}),[Q,ee]=c.useState(!1),[ne,Z]=c.useState([]),[te,K]=c.useState(!1),[$,G]=c.useState(null),[O,W]=c.useState(!1),E=o.find(s=>s.name==="unit_kerja"||s.name==="unit_kerja_tujuan"),m=o.filter(s=>s.name!=="unit_kerja"&&s.name!=="unit_kerja_tujuan"),h=!E||d[E.name]&&d[E.name]!=="";c.useEffect(()=>{let s=a.unit_tujuan;if(typeof s=="string")try{s=JSON.parse(s)}catch{s=[]}else Array.isArray(s)||(s=[]);s.length===0&&(s=wa),b(s)},[a]),c.useEffect(()=>{if(l&&Object.keys(l).length>0)y(l);else{const s={};o&&o.forEach(u=>{(u.type?u.type.toLowerCase():"text")==="checkbox"?s[u.name]=[]:s[u.name]=""}),E&&i.length===1&&(s[E.name]=i[0]),y(s)}},[o,i,E,l]),c.useEffect(()=>{a.form_type==="ijin_peminjaman"&&(K(!0),G(null),be.getCalendarData(a.id).then(s=>{s.status==="success"?Z(s.data):G(s.message)}).catch(s=>{console.error("Background calendar fetch failed:",s),G("Gagal memuat jadwal (Koneksi).")}).finally(()=>{K(!1)}))},[a.id,a.form_type]);const f=s=>{if(!s.dependency||s.dependency==="")return!0;const u=s.dependency.split(":");if(u.length<2)return!0;const w=u[0],v=u[1],B=d[w];return B==null?!1:Array.isArray(B)?B.includes(v):String(B)===String(v)},D=s=>{const{name:u,value:w}=s.target;let v={...d,[u]:w};if(u==="prodi"||u==="program_studi"){const B=_e[w]||"";v.fakultas=B}y(v),N[u]&&A(B=>({...B,[u]:null}))},T=(s,u)=>{y(w=>{const v=Array.isArray(w[s])?w[s]:[];return v.includes(u)?{...w,[s]:v.filter(B=>B!==u)}:{...w,[s]:[...v,u]}}),N[s]&&A(w=>({...w,[s]:null}))},_=(s,u)=>{y(w=>({...w,[u]:s.target.files[0]})),N[u]&&A(w=>({...w,[u]:null}))},I=()=>{const s={};return o.forEach(u=>{if(f(u)&&u.required){const w=d[u.name];(!w||Array.isArray(w)&&w.length===0)&&(s[u.name]=`${u.label} wajib diisi`)}}),A(s),Object.keys(s).length===0},z=async s=>{if(s.preventDefault(),!!I()){k("submitting"),g(0);try{const u=o.find(M=>M.type==="file"),w=u&&d[u.name]instanceof File?d[u.name]:null;let v=null;w&&(v={base64:await(xe=>new Promise((he,ae)=>{const pe=new FileReader;pe.readAsDataURL(xe),pe.onload=()=>he(pe.result),pe.onerror=Mt=>ae(Mt)}))(w),name:w.name,mimeType:w.type});const B={action:"submitApplication",serviceInfo:{id:a.id,name:a.jenis_layanan,folderId:a.folder_drive_id||""},userInput:d,fileData:v?v.base64:null,mimeType:v?v.mimeType:null,finalFileName:v?`${a.jenis_layanan}_${new Date().getTime()}_${v.name}`:null,ticketId:t||null,isResubmission:!!t},U=await(await fetch("https://script.google.com/macros/s/AKfycbzQ4JxHEhqeQOA0oJPTl6fXHIMnnll3Q9yGjCI5UkwO1HfzAQTRrpmDgGThvF6THFam/exec",{method:"POST",body:JSON.stringify(B)})).json();if(U.status==="success")R(U.ticketId),k("success");else throw new Error(U.message||"Gagal menyimpan data.")}catch(u){console.error("Final Submit Error:",u),alert("Server sedang sangat sibuk. Mohon tunggu beberapa saat dan coba lagi."),k("idle")}}},re=()=>{navigator.clipboard.writeText(j),L(!0),setTimeout(()=>L(!1),2e3)},ve=()=>{const s=d.unit_kerja||d.unit_kerja_tujuan||"-";pa(j,a.jenis_layanan,d,s)||alert("Gagal mendownload PDF.")},ie=()=>{const s=d.unit_kerja||d.unit_kerja_tujuan||"-",u=ba(j,a.jenis_layanan,d,s),w=encodeURIComponent(u);window.open(`https://wa.me/?text=${w}`,"_blank")},me=()=>{const s=d.unit_kerja||d.unit_kerja_tujuan||"-",{subject:u,body:w}=ga(j,a.jenis_layanan,d,s),v=`mailto:?subject=${encodeURIComponent(u)}&body=${encodeURIComponent(w)}`;window.open(v,"_self")},oe=(s,u)=>{if(s==="email")window.location.href=`mailto:${u}?subject=Layanan ${j}&body=ID: ${j}`;else{const w=`Assalamualaikum, ID Tiket saya: *${j}*`;window.open(`https://wa.me/6285117769733?text=${encodeURIComponent(w)}`,"_blank")}},ue=()=>{S.value.trim()&&(oe(S.type,S.value),P({isOpen:!1,type:"",value:""}))},p=()=>{window.open("https://layanan.iain-bone.ac.id/survei","_blank")},C=()=>{W(!0)},H=s=>{if((s.name==="unit_kerja"||s.name==="unit_kerja_tujuan")&&(!s.options||s.options.length===0))return i;const u=s.name?s.name.trim().toLowerCase():"";return u==="prodi"||u==="program_studi"?Object.keys(_e):u==="semester"?ja:u==="tahun_akademik"?Na():u==="fakultas"?[...new Set(Object.values(_e))]:s.options||[]};return x==="success"?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden w-full p-6 text-center animate-fade-in relative max-h-[90vh] overflow-y-auto",children:[S.isOpen&&e.jsx("div",{className:"absolute inset-0 bg-white/95 z-50 flex flex-col items-center justify-center p-6 animate-fade-in",children:e.jsxs("div",{className:"w-full max-w-xs bg-white border border-slate-200 shadow-xl rounded-2xl p-6",children:[e.jsxs("h4",{className:"font-bold text-slate-800 mb-2",children:["Input ",S.type==="email"?"Email":"WhatsApp"]}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Data kontak tidak ditemukan. Silakan masukkan manual."}),e.jsx("input",{autoFocus:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none mb-4 text-sm",placeholder:S.type==="email"?"nama@email.com":"08...",value:S.value,onChange:s=>P({...S,value:s.target.value})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>P({isOpen:!1,type:"",value:""}),className:"flex-1 py-2 bg-slate-100 text-slate-600 rounded-lg text-sm font-bold hover:bg-slate-200",children:"Batal"}),e.jsx("button",{onClick:ue,className:"flex-1 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:"Kirim"})]})]})}),e.jsx("div",{className:"w-14 h-14 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center shadow-sm mx-auto mb-3",children:e.jsx(Ne,{className:"w-7 h-7"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:t?"Pengajuan Ulang Berhasil":"Permohonan Berhasil Terkirim"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2 mb-4 leading-relaxed max-w-sm mx-auto",children:[e.jsx("strong",{children:"Download atau Screenshoot"})," Kode Pelacakan di bawah ini, anda bisa gunakan pada Bagian Kotak Kode Pelacakan di Halaman Utama, silakan cek secara berkala."]}),e.jsxs("div",{className:"bg-slate-50 border border-dashed border-slate-200 rounded-xl p-4 mb-4 relative group",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Salin Kode Pelacakan"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-3 md:gap-2 mt-2",children:[e.jsx("span",{className:"text-xl md:text-2xl font-mono font-bold text-slate-700 tracking-wider select-all whitespace-nowrap",children:j}),e.jsxs("button",{onClick:re,className:"w-full md:w-auto px-4 py-2 bg-white border border-slate-200 rounded-lg text-slate-500 hover:text-emerald-600 hover:border-emerald-200 transition flex items-center justify-center gap-1.5 text-xs font-bold shadow-sm",children:[F?e.jsx(Ne,{className:"w-3.5 h-3.5 text-emerald-500"}):e.jsx(Kt,{className:"w-3.5 h-3.5"}),F?"Tersalin":"Salin"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 max-w-xs mx-auto",children:[e.jsxs("button",{onClick:me,className:"flex items-center justify-center gap-2 py-2 bg-blue-50 text-blue-700 rounded-lg text-xs font-bold hover:bg-blue-100 transition",children:[e.jsx(De,{className:"w-3.5 h-3.5"})," Kirim Bukti Email"]}),e.jsxs("button",{onClick:ie,className:"flex items-center justify-center gap-2 py-2 bg-green-50 text-green-700 rounded-lg text-xs font-bold hover:bg-green-100 transition",children:[e.jsx(se,{className:"w-3.5 h-3.5"})," Kirim Bukti WA"]})]}),e.jsxs("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 w-full",children:[e.jsxs("button",{onClick:ve,className:"w-full py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 flex items-center justify-center gap-2 text-sm",children:[e.jsx(ge,{className:"w-4 h-4"})," Download Bukti Registrasi"]}),e.jsxs("button",{onClick:p,className:"w-full py-3 bg-amber-500 text-white rounded-xl font-bold hover:bg-amber-600 transition shadow-md shadow-amber-200 flex items-center justify-center gap-2 text-sm",children:[e.jsx(Gt,{className:"w-4 h-4"})," Isi Survei Pelayanan"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-1",children:[e.jsxs("button",{onClick:C,className:"py-2.5 bg-white border border-slate-200 text-slate-600 rounded-xl font-bold hover:bg-slate-50 transition text-sm flex items-center justify-center gap-1.5",children:[e.jsx(Wt,{className:"w-4 h-4"})," Lihat Tutorial"]}),e.jsx("button",{onClick:r,className:"py-2.5 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition text-sm",children:"Tutup"})]})]}),O&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 animate-fade-in",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/90 backdrop-blur-sm",onClick:()=>W(!1)}),e.jsxs("div",{className:"relative w-full max-w-4xl bg-black rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-scale-up",children:[e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsx("button",{onClick:()=>W(!1),className:"bg-black/50 text-white hover:bg-red-600 rounded-full p-2 transition backdrop-blur-md",children:e.jsx(J,{className:"w-5 h-5"})})}),e.jsx("div",{className:"w-full aspect-video",children:e.jsx("iframe",{src:"https://www.youtube.com/embed/2yx5dPMwWas?autoplay=1",title:"Tutorial Penggunaan Kode Pelacakan",className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]})]}):e.jsxs("div",{className:"bg-white w-full min-h-screen sm:min-h-0 sm:rounded-xl sm:shadow-sm sm:border sm:border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-100 sticky top-0 z-30",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:a.jenis_layanan})})}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 sm:p-5 mt-4",children:[e.jsxs("h4",{className:"font-bold text-amber-800 mb-3 flex items-center gap-2",children:[e.jsx(ke,{className:"w-5 h-5"})," Informasi Layanan"]}),e.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-4 text-sm",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("span",{className:"font-bold text-slate-800 block mb-1",children:"ðŸ“‹ Persyaratan Dokumen:"}),a.persyaratan&&a.persyaratan.length>0?e.jsx("ul",{className:"list-disc list-outside ml-4 text-slate-700 space-y-1",children:a.persyaratan.map((s,u)=>e.jsx("li",{children:s},u))}):e.jsx("span",{className:"text-slate-500 italic",children:"Tidak ada persyaratan khusus."})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1 flex flex-col gap-3 mt-3 sm:mt-0 sm:pl-4 sm:border-l border-amber-200/50",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-slate-800 block mb-1",children:"ðŸ’° Biaya:"})," ",e.jsx("span",{className:"px-2 py-1 bg-white border border-amber-100 rounded text-slate-700 font-medium",children:a.biaya||"Gratis"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-slate-800 block mb-1",children:"â±ï¸ Waktu:"})," ",e.jsx("span",{className:"px-2 py-1 bg-white border border-amber-100 rounded text-slate-700 font-medium",children:a.waktu||"Menyesuaikan"})]})]})]})]}),a.form_type==="ijin_peminjaman"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("button",{type:"button",onClick:()=>ee(!0),className:"w-full py-3 bg-pink-50 text-pink-700 border border-pink-200 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-pink-100 transition shadow-sm",children:[e.jsx(V,{className:"w-5 h-5"}),te?"Memuat Jadwal...":"Periksa Jadwal Peminjaman"]}),e.jsx("p",{className:"text-center text-xs text-black-400 mt-2",children:"Cek ketersediaan aset/ruangan sebelum mengisi form."})]}),E&&f(E)&&e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4 animate-fade-in relative shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-blue-800",children:[e.jsx(Fe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold text-sm uppercase tracking-wide",children:"Tujuan Surat / Unit Kerja"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:E.name,required:E.required,className:"w-full px-4 py-3 border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none appearance-none bg-white text-slate-700 font-bold shadow-sm",onChange:D,value:d[E.name]||"",children:[e.jsx("option",{value:"",disabled:!0,children:"-- Pilih Unit Tujuan --"}),H(E).map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx(Se,{className:"absolute right-3 top-3.5 w-5 h-5 text-slate-400 pointer-events-none"})]}),E.description&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1.5 flex items-start gap-1",children:[e.jsx(ke,{className:"w-3.5 h-3.5 mt-0.5 flex-shrink-0"}),E.description]}),N[E.name]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:N[E.name]}),e.jsx("div",{className:"absolute -top-3 left-6 px-2 bg-blue-100 text-[10px] font-bold text-blue-600 rounded border border-blue-200 shadow-sm",children:"WAJIB DIISI"})]})]}),e.jsxs("form",{onSubmit:z,className:"p-6 pb-24 sm:pb-6 transition-all duration-300 relative",children:[!h&&e.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/90 border border-slate-200 px-6 py-3 rounded-full shadow-lg flex items-center gap-2 backdrop-blur-sm pointer-events-auto",children:[e.jsx(Me,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Pilih Unit Tujuan Terlebih Dahulu"})]})}),e.jsx("div",{className:h?"":"opacity-40 pointer-events-none select-none grayscale-[0.5]",children:!o||o.length===0?e.jsx("p",{className:"text-center text-red-500 py-10",children:"Konfigurasi Form Tidak Ditemukan."}):e.jsx("div",{className:"flex flex-wrap -mx-2",children:m.map((s,u)=>{if(!f(s))return null;const w=s.width==="half"?"w-full md:w-1/2":"w-full",v=H(s),B=s.name==="fakultas",Y=s.type?s.type.toLowerCase():"text",ye=s.highlight===!0;return e.jsx("div",{className:`${w} px-2 mb-5 animate-fade-in`,children:e.jsxs("div",{className:`${ye?"bg-orange-50 border border-orange-200 p-4 rounded-xl relative shadow-sm":""}`,children:[ye&&e.jsxs("div",{className:"absolute -top-3 left-4 px-2 bg-orange-100 text-[10px] font-bold text-orange-600 rounded border border-orange-200 shadow-sm flex items-center gap-1",children:[e.jsx(Pe,{className:"w-3 h-3"})," PENTING"]}),e.jsxs("label",{className:`block text-sm font-semibold text-slate-700 mb-1 ${Y==="checkbox"?"hidden":""}`,children:[s.label," ",s.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),Y==="checkbox"?e.jsx("div",{children:!v||v.length<=1?(()=>{const U=v&&v.length>0?v[0]:"Ya",M=(d[s.name]||[]).includes(U);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:()=>T(s.name,U),className:`cursor-pointer relative p-4 rounded-xl border-2 transition-all duration-200 flex items-start gap-3 group select-none ${M?"border-emerald-500 bg-emerald-50/50 shadow-sm":"border-slate-200 hover:border-emerald-300 hover:bg-slate-50 bg-white"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-md border-2 flex-shrink-0 flex items-center justify-center transition-all duration-200 mt-0.5 ${M?"border-emerald-500 bg-emerald-500 text-white":"border-slate-300 bg-white group-hover:border-emerald-400"}`,children:M&&e.jsx(Be,{size:16,strokeWidth:3})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("span",{className:`font-bold text-sm transition-colors ${M?"text-emerald-900":"text-slate-700"}`,children:[s.label," ",s.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),s.description&&e.jsx("p",{className:"text-xs text-slate-500 mt-1 leading-snug",children:s.description})]})]}),N[s.name]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:N[s.name]})]})})():e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[s.label," ",s.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:v.map(U=>{const M=(d[s.name]||[]).includes(U);return e.jsxs("div",{onClick:()=>T(s.name,U),className:`cursor-pointer relative p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-between group select-none ${M?"border-emerald-500 bg-emerald-50/50 shadow-sm":"border-slate-200 hover:border-emerald-300 hover:bg-slate-50 bg-white"}`,children:[e.jsx("span",{className:`font-medium text-sm ${M?"text-emerald-700":"text-slate-600"}`,children:U}),e.jsx("div",{className:`w-5 h-5 rounded-md border flex items-center justify-center ${M?"border-emerald-500 bg-emerald-500 text-white":"border-slate-300 bg-white"}`,children:M&&e.jsx(Be,{size:14,strokeWidth:3})})]},U)})})]})}):Y==="textarea"?e.jsx("textarea",{name:s.name,required:s.required,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none h-24",placeholder:s.placeholder,onChange:D,value:d[s.name]||""}):Y==="select"?e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:s.name,required:s.required,className:`w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none appearance-none bg-white ${B?"bg-slate-100 cursor-not-allowed":""}`,onChange:D,value:d[s.name]||"",disabled:B,children:[e.jsx("option",{value:"",disabled:!0,children:"Pilih opsi..."}),v.map(U=>e.jsx("option",{value:U,children:U},U))]}),e.jsx(Se,{className:"absolute right-3 top-3 w-4 h-4 text-slate-400 pointer-events-none"})]}):Y==="file"?e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-4 text-center hover:bg-slate-50 transition relative group",children:[e.jsx("input",{type:"file",required:s.required,name:s.name,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:U=>_(U,s.name)}),e.jsx("div",{className:"text-sm text-slate-500 flex flex-col items-center",children:d[s.name]?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-8 h-8 text-emerald-500 mb-2"}),e.jsx("span",{className:"text-emerald-600 font-medium truncate max-w-xs",children:d[s.name].name})]}):e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"w-8 h-8 text-slate-400 mb-2 group-hover:text-emerald-500"}),e.jsxs("span",{className:"text-slate-500",children:["Klik upload ",s.label]})]})})]}):e.jsx("input",{type:Y,name:s.name,required:s.required,className:`w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none ${B?"bg-slate-100 cursor-not-allowed":""}`,placeholder:s.placeholder,onChange:D,value:d[s.name]||"",readOnly:B}),Y!=="checkbox"&&N[s.name]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:N[s.name]}),Y!=="checkbox"&&s.description&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1 ml-1 flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3 inline"})," ",s.description]})]})},u)})})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-slate-100 mt-6 relative z-20",children:[e.jsx("button",{type:"button",onClick:r,className:"w-full py-3 px-4 rounded-lg font-bold text-white bg-red-600 hover:bg-red-700 transition shadow-sm",children:"Batal"}),e.jsx("button",{type:"submit",disabled:x==="submitting"||!h,className:`w-full py-3 px-4 rounded-lg font-bold text-white transition shadow-sm ${x==="submitting"||!h?"bg-slate-300 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700"}`,children:x==="submitting"?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5 animate-spin"}),q>0?`Mencoba lagi (${q})...`:"Sedang Memproses..."]}):t?"Ajukan Ulang":"Kirim"})]})]}),e.jsx(fa,{isOpen:Q,onClose:()=>ee(!1),events:ne,loading:te,error:$}),O&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 animate-fade-in",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/90 backdrop-blur-sm",onClick:()=>W(!1)}),e.jsxs("div",{className:"relative w-full max-w-4xl bg-black rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-scale-up",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-900/50 absolute top-0 left-0 right-0 z-10 pointer-events-none",children:[e.jsx("span",{className:"text-white font-bold text-sm drop-shadow-md opacity-0",children:"Tutorial"})," ",e.jsx("button",{onClick:()=>W(!1),className:"bg-black/50 text-white hover:bg-red-600 rounded-full p-2 transition backdrop-blur-md pointer-events-auto",children:e.jsx(J,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"w-full aspect-video",children:e.jsx("iframe",{src:"https://www.youtube.com/embed/d2yx5dPMwWas?autoplay=1",title:"Tutorial Penggunaan Kode Pelacakan",className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]})]})},ya=({slides:a})=>{const[r,n]=c.useState(0),l=a&&Array.isArray(a)?[...a].sort((t,i)=>(t.order||99)-(i.order||99)):[];return c.useEffect(()=>{n(0)},[a]),c.useEffect(()=>{if(l.length<=1)return;const t=setInterval(()=>{n(i=>i===l.length-1?0:i+1)},5e3);return()=>clearInterval(t)},[l.length]),!l||l.length===0?e.jsx("div",{className:"w-full aspect-[21/9] bg-slate-200 rounded-2xl animate-pulse flex items-center justify-center shadow-sm border border-slate-300 border-dashed",children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx("p",{className:"text-slate-400 text-sm font-medium mb-1",children:"Memuat Banner..."}),e.jsx("p",{className:"text-slate-300 text-xs",children:"Menunggu data dari content.json"})]})}):e.jsxs("div",{className:"relative w-full aspect-[21/9] rounded-2xl overflow-hidden shadow-md group bg-slate-200",children:[l.map((t,i)=>{const b=t.url&&t.url.trim()!==""&&t.url!=="#";return e.jsxs("div",{className:`absolute inset-0 transition-opacity duration-1000 ease-in-out ${i===r?"opacity-100 z-10":"opacity-0 z-0"}`,children:[b&&e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"absolute inset-0 z-20 cursor-pointer","aria-label":`Buka tautan ${t.title||"banner"}`,children:e.jsx("span",{className:"sr-only",children:"Buka Banner"})}),t.tag&&e.jsx("div",{className:"absolute top-4 right-4 z-20 bg-emerald-500 text-white text-[10px] md:text-xs font-bold px-2 py-1 rounded shadow-sm uppercase tracking-wider",children:t.tag}),e.jsx("img",{src:t.image||t.imgUrl,alt:t.title||"Banner Layanan",className:"w-full h-full object-cover",onError:o=>{o.target.onerror=null,o.target.src="https://via.placeholder.com/1050x450?text=Gambar+Rusak"}})]},t.id||i)}),l.length>1&&e.jsx("div",{className:"absolute bottom-3 left-0 right-0 z-30 flex justify-center gap-1.5 pointer-events-none",children:l.map((t,i)=>e.jsx("button",{onClick:()=>n(i),className:`h-1.5 md:h-2 rounded-full transition-all shadow-sm pointer-events-auto border border-white/20 ${i===r?"bg-emerald-500 w-6 md:w-8":"bg-white/80 w-1.5 md:w-2 hover:bg-white"}`,"aria-label":`Lihat slide ke-${i+1}`},i))})]})},ka=({name:a,className:r})=>{const n={Globe:$t,Monitor:qe,BookOpen:Je,FileText:ce,Library:We,Server:Ge,UserPlus:Ke,CreditCard:Oe,GraduationCap:Te,Users:He,LinkIcon:je,MoreHorizontal:Et,Phone:Ae,Mail:De,MapPin:Ee,Calendar:V,CheckCircle:Ne,Award:ze,Bell:Pt,Briefcase:Re,Calculator:Lt,Camera:At,Clock:le,Cloud:It,Database:Ft,Flag:Tt,Folder:Dt,Home:we,Image:St,Key:Ct,Layout:kt,Lock:Me,MessageCircle:se,Music:yt,PenTool:vt,Printer:Nt,Search:X,Settings:jt,Shield:wt,ShoppingCart:ft,Star:Pe,Tablet:gt,Tag:bt,Terminal:pt,Truck:ht,User:Le,Video:xt,Wifi:ut,Wrench:ct},l=a?a.charAt(0).toUpperCase()+a.slice(1):"",t=n[l]||n[a]||(a==="Tool"?n.Wrench:null)||je;return e.jsx(t,{className:r})},Ca=({links:a})=>{const r=a||[],[n,l]=c.useState(!1),[t,i]=c.useState(10),b=[{bg:"#FEE2E2",text:"#DC2626"},{bg:"#FFEDD5",text:"#EA580C"},{bg:"#FEF3C7",text:"#D97706"},{bg:"#DCFCE7",text:"#16A34A"},{bg:"#D1FAE5",text:"#059669"},{bg:"#CCFBF1",text:"#0D9488"},{bg:"#CFFAFE",text:"#0891B2"},{bg:"#DBEAFE",text:"#2563EB"},{bg:"#E0E7FF",text:"#4F46E5"},{bg:"#EDE9FE",text:"#7C3AED"},{bg:"#F3E8FF",text:"#9333EA"},{bg:"#FAE8FF",text:"#C026D3"},{bg:"#FCE7F3",text:"#DB2777"},{bg:"#FFE4E6",text:"#E11D48"}],o=x=>{const j=(typeof x=="number"?x:x?x.length+x.charCodeAt(0):0)%b.length;return b[j]};if(c.useEffect(()=>{const x=()=>i(window.innerWidth<768?8:10);return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),r.length===0)return null;const d=!n&&r.length>t,y=d?r.slice(0,t-1):r;return e.jsx("div",{className:"mb-6 animate-fade-in",children:e.jsxs("div",{className:"p-1",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-amber-500 rounded-full"}),"Menu Lainnya"]}),e.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-10 gap-3 sm:gap-4",children:[y.map(x=>{const k=x.icon||"FileText";let j={},R="";if(x.color)x.color.startsWith("#")?j={backgroundColor:`${x.color}15`,color:x.color}:R=x.color;else{const F=o(x.id||x.title);j={backgroundColor:F.bg,color:F.text}}return e.jsxs("a",{href:x.url,target:"_blank",rel:"noreferrer",className:"group flex flex-col items-center gap-2 p-2 rounded-[15px] hover:bg-slate-50 transition text-center",children:[e.jsx("div",{className:`p-3 rounded-[15px] group-hover:scale-110 transition-transform duration-300 shadow-sm shadow-black/5 ${R}`,style:j,children:e.jsx(ka,{name:k,className:"w-6 h-6 text-current"})}),e.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-slate-600 group-hover:text-slate-900 leading-tight",children:x.title||x.name})]},x.id)}),d&&e.jsxs("button",{onClick:()=>l(!0),className:"group flex flex-col items-center gap-2 p-2 rounded-[15px] hover:bg-slate-50 transition text-center cursor-pointer",children:[e.jsx("div",{className:"p-3 rounded-[15px] bg-slate-200 text-slate-600 group-hover:scale-110 transition-transform duration-300 shadow-sm shadow-black/5",children:e.jsx(Et,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-slate-600 group-hover:text-slate-900 leading-tight",children:"Lainnya"})]})]})]})})},Sa=({name:a,className:r})=>{const n={Globe:$t,Monitor:qe,BookOpen:Je,FileText:ce,Library:We,Server:Ge,UserPlus:Ke,CreditCard:Oe,GraduationCap:Te,Users:He,LinkIcon:je,Phone:Ae,Mail:De,MapPin:Ee,Calendar:V,CheckCircle:Ne,MessageCircle:se,Award:ze,Briefcase:Re,Home:we,Info:ke,AlertCircle:Bt,HelpCircle:_t,Megaphone:Vt,Star:Pe,Zap:Yt,BellRing:Qt,ExternalLink:fe},l=a?a.charAt(0).toUpperCase()+a.slice(1):"",t=n[l]||n[a]||je;return e.jsx(t,{className:r})},Da=({links:a})=>{const r=a||[];if(r.length===0)return null;const n=r.length;let l="";return n===1?l="grid-cols-1":n===2?l="grid-cols-1 md:grid-cols-2":l="grid-cols-1 md:grid-cols-3",e.jsxs("div",{className:"mb-8 animate-slide-up",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-ping"}),e.jsx("h3",{className:"text-sm font-bold text-slate-600 uppercase tracking-wider",children:"Info Terkini"})]}),e.jsx("div",{className:`grid gap-3 ${l}`,children:r.map(t=>{const i=t.color&&t.color.trim()!=="",b=t.icon||"LinkIcon";let o={background:"linear-gradient(135deg, #059669 0%, #047857 100%)",color:"white"},d={backgroundColor:"rgba(255,255,255,0.2)"},y="text-white",x="text-white",k="text-white/80";if(i){const j=t.color;o={backgroundColor:j,color:"white",boxShadow:`0 4px 6px -1px ${j}40`},d={backgroundColor:"rgba(255,255,255,0.2)"},y="text-white",x="text-white",k="text-white/90"}return e.jsx("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"relative block w-full p-4 rounded-xl shadow-sm hover:shadow-lg transition-all transform hover:-translate-y-0.5 group border-0",style:o,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:"p-2 rounded-lg flex-shrink-0 transition-colors",style:d,children:e.jsx(Sa,{name:b,className:`w-5 h-5 ${y}`})}),e.jsxs("div",{className:"text-left min-w-0",children:[e.jsx("h4",{className:`font-bold text-xs sm:text-sm leading-tight truncate ${x}`,children:t.title}),t.subtitle&&e.jsx("p",{className:`text-[10px] sm:text-xs mt-0.5 truncate ${k}`,children:t.subtitle})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 flex-shrink-0 ml-2",children:[t.tag&&e.jsx("span",{className:"text-[9px] font-bold px-1.5 py-0.5 rounded-full whitespace-nowrap bg-white text-slate-800 shadow-sm",children:t.tag}),!t.tag&&e.jsx(Ce,{className:"w-4 h-4 text-white/70 group-hover:text-white transition-colors"})]})]})},t.id)})})]})},Ta=({onResubmit:a})=>{const[r,n]=c.useState(""),[l,t]=c.useState(null),[i,b]=c.useState(!1),[o,d]=c.useState(!1),y=new Date().getFullYear(),x="https://script.google.com/macros/s/AKfycbzQ4JxHEhqeQOA0oJPTl6fXHIMnnll3Q9yGjCI5UkwO1HfzAQTRrpmDgGThvF6THFam/exec",k=async L=>{if(L.preventDefault(),!!r.trim()){b(!0),t(null),d(!1);try{const A=await(await fetch(`${x}?action=trackTicket&id=${encodeURIComponent(r)}`)).json();A&&A.status==="success"?t(A.data):d(!0)}catch(N){console.error("Tracking Error:",N),d(!0)}finally{b(!1)}}},j=()=>{t(null),d(!1),n("")},R=()=>{alert(`Fitur pengecekan arsip layanan tahun ${y-1} dan sebelumnya akan segera tersedia.`)},F=L=>{const N=L?L.toLowerCase():"";return N.includes("selesai")||N.includes("siap")||N.includes("terbit")?"bg-emerald-100 text-emerald-700 border-emerald-200":N.includes("tolak")||N.includes("gagal")?"bg-red-100 text-red-700 border-red-200":N.includes("proses")||N.includes("verifikasi")?"bg-blue-100 text-blue-700 border-blue-200":"bg-amber-100 text-amber-700 border-amber-200"};return e.jsx("div",{className:"animate-fade-in-up",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"mb-4 px-1",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-1 hidden md:flex items-center gap-2",children:"Lacak Status Permohonan"}),e.jsxs("p",{className:"text-sm text-emerald-50 max-w-2xl",children:["Lacak Permohonan anda dengan memasukkan ",e.jsx("strong",{children:"Kode Pelacakan"})," di bawah ini untuk memantau progresnya."]})]}),e.jsx("div",{className:"bg-white/10 p-2 rounded-2xl border border-white/20 shadow-sm backdrop-blur-sm",children:e.jsxs("form",{onSubmit:k,className:"flex gap-2 w-full",children:[e.jsxs("div",{className:"relative flex-grow group",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400 group-focus-within:text-emerald-600 transition-colors pointer-events-none",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"Contoh : SKL-20251219-P1ZAI6",value:r,onChange:L=>n(L.target.value),className:"w-full pl-10 pr-3 py-3 bg-white border border-transparent focus:border-emerald-500 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/50 text-sm font-medium transition-all placeholder:text-slate-400 text-slate-800 truncate"})]}),e.jsx("button",{type:"submit",disabled:i||!r,className:"bg-slate-800 hover:bg-slate-900 text-white px-4 md:px-6 py-2.5 rounded-xl font-bold shadow-lg transition-all transform hover:-translate-y-0.5 active:translate-y-0 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none shrink-0",children:i?e.jsx(Qe,{className:"animate-spin h-5 w-5"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden md:inline",children:"Lacak"}),e.jsx(X,{className:"w-5 h-5"})]})})]})}),o&&e.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3 animate-fade-in-up relative shadow-sm",children:[e.jsx(Bt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-800 pr-6",children:[e.jsx("p",{className:"font-bold mb-1",children:"Kode Pelacakan Tidak Ditemukan"}),e.jsxs("p",{className:"leading-relaxed",children:["Kode ",e.jsxs("strong",{children:['"',r,'"']})," tidak tersedia di Database Layanan saat ini."]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700 bg-red-100/50 -mx-4 -mb-4 p-4 rounded-b-xl",children:e.jsxs("p",{children:["Jika anda mencari Layanan di tahun sebelum tahun ",e.jsx("strong",{children:y}),", dapat melakukan pengecekan"," ",e.jsx("button",{onClick:R,className:"underline font-bold hover:text-red-900 cursor-pointer inline-flex items-center gap-1",children:"Disini"}),"."]})})]}),e.jsx("button",{onClick:()=>d(!1),className:"absolute top-2 right-2 text-red-400 hover:text-red-600 p-1 rounded-full hover:bg-red-100 transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]}),l&&e.jsxs("div",{className:"mt-4 bg-white rounded-xl shadow-xl animate-fade-in-up text-slate-800 relative overflow-hidden",children:[e.jsx("button",{onClick:j,className:"absolute top-4 right-4 text-slate-300 hover:text-red-500 transition-colors p-1 bg-slate-50 rounded-full z-20",title:"Tutup Hasil",children:e.jsx(J,{className:"w-5 h-5"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center border-b border-slate-100 pb-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("h4",{className:"font-bold text-xl text-slate-800 tracking-tight font-mono",children:l.ticketId})}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border ${F(l.status)}`,children:l.status})]}),e.jsxs("div",{className:"mt-3 sm:mt-0 text-right flex items-center gap-2 text-slate-500 text-xs sm:text-sm bg-slate-50 px-3 py-1.5 rounded-lg",children:[e.jsx(V,{className:"w-4 h-4"}),new Date(l.date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wider font-bold mb-1",children:"Layanan"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 font-medium",children:[e.jsx(ce,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"truncate",children:l.serviceName||l.service})]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wider font-bold mb-1",children:"Pemohon"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 font-medium",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"truncate",children:l.applicant||"Nama Tidak Tersedia"})]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[e.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wider font-bold mb-1",children:"Unit Tujuan"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 font-medium",children:[e.jsx(Fe,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"truncate",children:l.unit||"Unit Tidak Diketahui"})]})]})]}),e.jsxs("div",{className:"relative pl-4 border-l-2 border-slate-100 space-y-6 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[21px] bg-emerald-500 h-3 w-3 rounded-full ring-4 ring-white"}),e.jsx("p",{className:"text-sm font-bold text-slate-800",children:"Permohonan Diterima"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Data telah masuk ke sistem."})]}),e.jsxs("div",{className:"relative animate-fade-in",children:[e.jsx("div",{className:"absolute -left-[23px] h-4 w-4 rounded-full ring-4 ring-white flex items-center justify-center bg-blue-500",children:e.jsx(le,{className:"w-2.5 h-2.5 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-slate-800",children:"Status Saat Ini"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-bold border ${F(l.status)}`,children:l.status})})]}),l.adminNote&&e.jsxs("div",{className:"relative animate-fade-in",children:[e.jsx("div",{className:"absolute -left-[21px] bg-amber-500 h-3 w-3 rounded-full ring-4 ring-white animate-pulse"}),e.jsx("p",{className:"text-sm font-bold text-amber-700",children:"Catatan Petugas"}),e.jsxs("div",{className:"mt-1 p-3 bg-amber-50 text-amber-800 text-xs rounded-lg border border-amber-100 italic",children:['"',l.adminNote,'"']})]}),l.status&&l.status.toLowerCase().includes("selesai")&&e.jsxs("div",{className:"relative animate-fade-in",children:[e.jsx("div",{className:"absolute -left-[23px] bg-emerald-600 h-4 w-4 rounded-full ring-4 ring-white flex items-center justify-center",children:e.jsx(Be,{className:"w-2.5 h-2.5 text-white"})}),e.jsx("p",{className:"text-sm font-bold text-emerald-700",children:"Selesai"}),e.jsx("p",{className:"text-xs text-emerald-600",children:"Dokumen telah diterbitkan."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-start gap-3 pt-4 border-t border-slate-100",children:[l.fileUrl?e.jsxs("a",{href:l.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"w-full sm:w-auto px-6 py-2.5 rounded-xl font-bold text-white text-sm flex items-center justify-center gap-2 bg-emerald-600 hover:bg-emerald-700 shadow-md hover:shadow-lg transition-all",children:[e.jsx(ge,{className:"w-4 h-4"}),"Download Dokumen"]}):e.jsxs("button",{disabled:!0,className:"w-full sm:w-auto px-6 py-2.5 rounded-xl font-bold text-slate-400 bg-slate-100 text-sm flex items-center justify-center gap-2 cursor-not-allowed",children:[e.jsx(le,{className:"w-4 h-4"}),l.status&&l.status.toLowerCase().includes("selesai")?"Dokumen Fisik (Ambil di Kantor)":"Dokumen Belum Tersedia"]}),e.jsx("button",{onClick:j,className:"w-full sm:w-auto px-6 py-2.5 rounded-xl font-bold text-red-600 bg-white border border-red-600 hover:bg-red-50 hover:border-red-300 text-sm flex items-center justify-center gap-2 transition-all",children:"Tutup"}),l.status&&l.status.toLowerCase().includes("tolak")&&a&&e.jsx("button",{onClick:()=>a(l.serviceId,l.rawInput,l.ticketId),className:"w-full sm:w-auto px-6 py-2.5 rounded-xl font-bold text-white bg-red-500 hover:bg-amber-600 shadow-md hover:shadow-amber-200 text-sm flex items-center justify-center gap-2 transition-all",children:"Ajukan Ulang Perbaikan"})]})]})]})]})})},Fa=({data:a,onSeeMore:r})=>{const n=a?a.slice(0,4):[],[l,t]=c.useState(null),i=o=>{t(l===o?null:o)},b=o=>{if(!o)return null;const d=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,y=o.match(d);return y&&y[2].length===11?`https://www.youtube.com/embed/${y[2]}`:null};return n.length===0?null:e.jsxs("div",{className:"mt-6 md:mt-8 mb-1 md:mb-12 animate-fade-in-up",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-4 md:mb-8 px-1 md:px-2",children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 mb-2 md:mb-0",children:[e.jsx("div",{className:"p-2 md:p-3 bg-emerald-100 text-emerald-600 rounded-xl md:rounded-2xl shadow-sm",children:e.jsx(Xt,{className:"w-6 h-6 md:w-8 md:h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-2xl font-bold text-slate-800",children:"Pertanyaan Populer"}),e.jsx("p",{className:"text-xs md:text-base text-slate-500 mt-0.5 md:mt-1",children:"Jawaban cepat untuk pertanyaan umum"})]})]}),e.jsxs("button",{onClick:r,className:"hidden md:flex items-center gap-2 text-sm font-bold text-emerald-600 hover:text-emerald-700 transition group bg-emerald-50 px-5 py-2.5 rounded-xl hover:bg-emerald-100",children:["Lihat Semua FAQ",e.jsx(Ce,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6 items-start",children:n.map(o=>{const d=b(o.link),y=o.link&&!d;return e.jsxs("div",{className:`
                group relative flex flex-col
                bg-white rounded-xl md:rounded-2xl transition-all duration-300
                ${l===o.id?"shadow-lg ring-1 ring-emerald-500/50 z-10 scale-[1.01] md:scale-[1.02]":"shadow-sm hover:shadow-md border border-slate-100 hover:border-emerald-200"}
              `,children:[e.jsxs("button",{onClick:()=>i(o.id),className:"p-3 md:p-5 text-left w-full flex flex-col gap-2 md:gap-3",children:[e.jsx("span",{className:`font-bold text-sm md:text-base leading-snug transition-colors ${l===o.id?"text-emerald-700":"text-slate-800 group-hover:text-emerald-700"}`,children:o.question}),e.jsxs("div",{className:"flex items-center justify-between w-full pt-2 md:pt-3 mt-1 md:mt-2 border-t border-slate-50 group-hover:border-slate-100 transition-colors",children:[e.jsx("span",{className:"text-[9px] md:text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-slate-50 px-2 py-0.5 md:px-3 md:py-1 rounded-full group-hover:bg-emerald-50 group-hover:text-emerald-600 transition-colors",children:o.category}),e.jsx("div",{className:`p-1 md:p-1.5 rounded-full transition-all duration-300 ${l===o.id?"bg-emerald-500 text-white rotate-180 shadow-lg shadow-emerald-200":"bg-slate-100 text-slate-400 group-hover:bg-emerald-100 group-hover:text-emerald-600"}`,children:l===o.id?e.jsx(Zt,{className:"w-3 h-3 md:w-4 md:h-4"}):e.jsx(ea,{className:"w-3 h-3 md:w-4 md:h-4"})})]})]}),e.jsx("div",{className:`
                  overflow-hidden transition-all duration-500 ease-in-out
                  ${l===o.id?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}
                `,children:e.jsxs("div",{className:"px-3 pb-3 md:px-5 md:pb-5",children:[e.jsx("div",{className:"bg-emerald-50/50 rounded-lg md:rounded-xl p-3 md:p-4 text-xs md:text-sm text-slate-600 leading-relaxed border border-emerald-100/50",children:o.answer}),o.link&&e.jsx("div",{className:"mt-4 animate-fade-in",children:d?e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-red-600 text-[10px] font-bold uppercase tracking-wider",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"})," Video Tutorial"]}),e.jsx("div",{className:"aspect-video w-full rounded-lg overflow-hidden border border-slate-200 shadow-sm bg-black",children:e.jsx("iframe",{src:d,title:o.question,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}):y?e.jsxs("a",{href:o.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between w-full p-3 bg-blue-50 border border-blue-100 rounded-lg text-blue-700 hover:bg-blue-100 transition-colors group/btn",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 group-hover/btn:bounce"}),e.jsx("span",{className:"text-xs font-bold",children:"Unduh File Tutorial"})]}),e.jsx(fe,{className:"w-3 h-3 opacity-50"})]}):null})]})})]},o.id)})}),e.jsxs("button",{onClick:r,className:"md:hidden w-full mt-2 py-2.5 bg-white border border-slate-200 text-slate-700 font-bold text-sm rounded-xl flex items-center justify-center gap-2 hover:bg-slate-50 hover:border-slate-300 transition shadow-sm",children:["Lihat Semua FAQ",e.jsx(Ce,{className:"w-4 h-4"})]})]})},Ia=["Semua","Akademik","Keuangan","Kemahasiswaan","Teknis","Umum"],Aa=({data:a=[],guides:r=[],onBack:n,onShowNotification:l})=>{const[t,i]=c.useState(""),[b,o]=c.useState("Semua"),[d,y]=c.useState([]),[x,k]=c.useState(null),[j,R]=c.useState("faq"),F=["Semua",...new Set(a.map(g=>g.category))],L=F.length>1?F:Ia,N=g=>{if(!g)return null;const S=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,P=g.match(S);return P&&P[2].length===11?`https://www.youtube.com/embed/${P[2]}`:null};c.useEffect(()=>{const g=a.filter(S=>{const P=b==="Semua"||S.category===b,Q=S.question?.toLowerCase().includes(t.toLowerCase())||S.answer?.toLowerCase().includes(t.toLowerCase());return P&&Q});y(g),k(null)},[t,b,a]);const A=g=>{k(x===g?null:g)},q=(g="Dokumen")=>{l?l({type:"success",title:"Unduhan Dimulai",message:`${g} sedang diunduh ke perangkat Anda.`,actionLabel:"Lihat Progress",onAction:()=>console.log("Aksi lihat progress")}):alert(`Mendownload ${g}...`)};return e.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans pb-20 relative",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-lime-500 pt-16 pb-32 px-4 rounded-b-[40px] shadow-2xl relative overflow-hidden transition-all duration-500",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white rounded-full mix-blend-overlay filter blur-[100px] opacity-20 -mr-20 -mt-20"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-emerald-800 rounded-full mix-blend-overlay filter blur-[80px] opacity-10 -ml-20 -mb-20"}),e.jsxs("div",{className:"container mx-auto max-w-5xl relative z-10 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-3 drop-shadow-sm mt-8",children:j==="guides"?"Daftar Pedoman & SOP":"Pusat Bantuan & Pertanyaan Umum"}),e.jsx("p",{className:`text-emerald-50 text-sm md:text-base max-w-2xl mx-auto font-medium ${j==="guides"?"mb-6":"mb-10"}`,children:j==="guides"?"Unduh dokumen resmi, panduan akademik, dan prosedur operasional standar terbaru.":"Cari jawaban seputar layanan terpadu Institut Agama Islam Negeri Bone."}),j==="guides"&&e.jsxs("div",{className:"mb-10 animate-fade-in-up flex flex-col sm:flex-row items-center justify-center gap-3",children:[e.jsxs("button",{onClick:()=>{R("faq"),window.scrollTo({top:0,behavior:"smooth"})},className:"inline-flex items-center gap-2 px-6 py-2.5 bg-white text-emerald-600 hover:bg-emerald-50 rounded-full font-bold text-sm transition-all shadow-lg shadow-emerald-900/20",children:[e.jsx(ta,{className:"w-4 h-4"})," Kembali ke Halaman FAQ"]}),e.jsxs("a",{href:"http://sop.iain-bone.ac.id",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white hover:bg-blue-700 rounded-full font-bold text-sm transition-all shadow-lg shadow-blue-900/20",children:[e.jsx(fe,{className:"w-4 h-4"})," Lihat SOP IAIN Bone"]})]}),j==="faq"&&e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 max-w-3xl mx-auto bg-white/20 p-2 rounded-2xl backdrop-blur-md border border-white/30 shadow-lg animate-fade-in-up",children:[e.jsxs("div",{className:"relative flex-grow group",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-4 text-emerald-100 group-focus-within:text-white transition-colors",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"Ketik kata kunci (misal: Wisuda, Cuti)...",value:t,onChange:g=>i(g.target.value),className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-white/10 border border-transparent text-white focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/50 placeholder:text-emerald-100 transition-all text-sm md:text-base font-medium"})]}),e.jsxs("div",{className:"relative md:w-56 group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:e.jsx(Ie,{className:"w-4 h-4 text-emerald-100"})}),e.jsx("select",{value:b,onChange:g=>o(g.target.value),className:"w-full h-full pl-11 pr-10 py-3.5 rounded-xl bg-white/10 border border-transparent text-white focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/50 cursor-pointer appearance-none text-sm md:text-base font-medium hover:bg-white/20 transition-colors",children:L.map(g=>e.jsx("option",{value:g,className:"text-slate-800 bg-white",children:g},g))}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none",children:e.jsx(Se,{className:"w-4 h-4 text-emerald-100"})})]})]})]})]}),e.jsx("div",{className:"container mx-auto max-w-6xl px-4 -mt-20 relative z-20",children:j==="faq"?e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-4 gap-8 animate-slide-up",children:[e.jsx("div",{className:"order-2 lg:order-1 lg:col-span-1 space-y-6",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-100",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-3",children:[e.jsxs("button",{onClick:()=>q("Panduan Layanan"),className:"w-full mt-2 py-2.5 bg-emerald-600 text-white rounded-xl font-bold text-sm hover:bg-emerald-700 transition flex items-center justify-center gap-2 shadow-md shadow-emerald-200",children:[e.jsx(ge,{className:"w-4 h-4"})," Panduan Layanan"]}),e.jsxs("a",{href:"http://sop.iain-bone.ac.id",target:"_blank",rel:"noopener noreferrer",className:"w-full py-2.5 bg-blue-600 text-white border border-blue-200 rounded-xl font-bold text-sm hover:bg-blue-100 transition flex items-center justify-center gap-2 shadow-md shadow-blue-200",children:[e.jsx(fe,{className:"w-4 h-4"})," Pedoman & SOP"]})]})})}),e.jsxs("div",{className:"order-1 lg:order-last lg:col-span-3 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[e.jsx("h3",{className:"font-bold text-white lg:text-white text-lg drop-shadow-sm transition-colors duration-300",children:"Hasil Pencarian"}),e.jsxs("span",{className:"text-xs bg-white/90 text-slate-600 px-3 py-1 rounded-full font-bold shadow-sm",children:["Total: ",d.length]})]}),d.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map((g,S)=>{const P=N(g.link),Q=g.link&&!P;return e.jsxs("div",{className:`
                                        bg-white rounded-2xl overflow-hidden transition-all duration-300 border border-transparent flex flex-col
                                        ${x===S?"shadow-xl shadow-emerald-500/10 ring-1 ring-emerald-500/50 md:col-span-2":"shadow-sm hover:shadow-md border-slate-100"}
                                    `,children:[e.jsxs("button",{onClick:()=>A(S),className:"w-full px-6 py-5 flex items-start justify-between bg-white text-left focus:outline-none gap-4 h-full",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:`font-bold text-base transition-colors leading-snug ${x===S?"text-emerald-700":"text-slate-800"}`,children:g.question}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold text-slate-400 bg-slate-50 px-2 py-0.5 rounded w-fit",children:g.category})]}),e.jsx("div",{className:`
                                            flex-shrink-0 p-2 rounded-full transition-all duration-300
                                            ${x===S?"bg-emerald-100 text-emerald-600 rotate-180":"bg-slate-50 text-slate-400 group-hover:bg-slate-100"}
                                        `,children:e.jsx(Se,{className:"w-5 h-5"})})]}),e.jsx("div",{className:`transition-all duration-300 ease-in-out ${x===S?"max-h-[800px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"px-6 pb-6 pt-0",children:[e.jsx("div",{className:"text-sm text-slate-600 leading-relaxed bg-slate-50/50 p-4 rounded-xl border border-slate-100 whitespace-pre-wrap",children:g.answer}),g.link&&e.jsx("div",{className:"mt-4 animate-fade-in",children:P?e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-red-600 text-[10px] font-bold uppercase tracking-wider",children:[e.jsx(Ue,{className:"w-3.5 h-3.5"})," Video Tutorial"]}),e.jsx("div",{className:"aspect-video w-full rounded-xl overflow-hidden border border-slate-200 bg-black shadow-inner",children:e.jsx("iframe",{src:P,title:g.question,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}):Q?e.jsxs("a",{href:g.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between w-full p-4 bg-blue-50 border border-blue-100 rounded-xl text-blue-700 hover:bg-blue-100 transition-colors group/btn shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:e.jsx(ge,{className:"w-5 h-5 group-hover/btn:bounce"})}),e.jsx("span",{className:"text-sm font-bold",children:"Unduh File Tutorial"})]}),e.jsx(fe,{className:"w-4 h-4 opacity-50"})]}):null})]})})]},g.id)})}):e.jsxs("div",{className:"text-center py-24 bg-white rounded-3xl border-2 border-dashed border-slate-200 col-span-full shadow-sm",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"w-8 h-8 text-slate-300"})}),e.jsx("h4",{className:"text-slate-800 font-bold text-lg mb-1",children:"Tidak ada hasil"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Coba ubah kata kunci atau kategori filter Anda."}),e.jsx("button",{onClick:()=>{i(""),o("Semua")},className:"mt-4 text-emerald-600 font-bold text-sm hover:underline",children:"Reset Pencarian"})]})]})]}):e.jsx("div",{className:"animate-slide-up",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 border-b border-slate-100 pb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(rt,{className:"w-6 h-6 text-emerald-600"}),"Arsip Dokumen & Pedoman"]}),e.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Total ",r.length," dokumen tersedia."]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Cari dokumen...",className:"pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50 w-full md:w-64"})]})]}),r.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-start",children:r.map(g=>e.jsxs("div",{className:"flex flex-col p-5 rounded-xl border border-slate-100 hover:border-emerald-200 hover:shadow-lg transition-all bg-white group hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-xl group-hover:bg-emerald-50 group-hover:text-emerald-600 transition-colors shadow-sm",children:e.jsx(ce,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-700 text-base leading-tight group-hover:text-emerald-700 transition-colors",children:g.title}),e.jsx("span",{className:"inline-block mt-2 bg-slate-100 px-2 py-0.5 rounded text-[10px] uppercase tracking-wider font-bold text-slate-500",children:g.category})]})]}),e.jsxs("div",{className:"mt-auto pt-4 border-t border-slate-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 font-medium",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"})," ",g.date||"-"]}),e.jsxs("span",{children:["â€¢ ",g.size||"-"]})]}),e.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-slate-50 text-slate-600 text-xs font-bold rounded-lg hover:bg-emerald-600 hover:text-white transition-all flex items-center justify-center gap-2 group/btn shadow-sm",children:[e.jsx(ge,{className:"w-3.5 h-3.5 group-hover/btn:scale-110 transition-transform"}),"Unduh"]})]})]},g.id))}):e.jsxs("div",{className:"text-center py-20 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200",children:[e.jsx(rt,{className:"w-12 h-12 text-slate-200 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400 text-sm italic",children:"Belum ada dokumen pedoman yang ditambahkan."})]})]})})})]})},La=({activeTab:a,onNavigate:r})=>{const n=[{id:"home",label:"Beranda",icon:we},{id:"services",label:"Layanan",icon:Ut},{id:"chat",label:"Chat WA",icon:se},{id:"track",label:"Lacak",icon:X},{id:"faq",label:"FAQ",icon:_t}];return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 px-2 py-2 md:hidden z-50 shadow-[0_-4px_20px_-5px_rgba(0,0,0,0.1)] pb-safe",children:e.jsx("div",{className:"flex justify-around items-end",children:n.map(l=>{const t=a===l.id;return e.jsxs("button",{onClick:()=>r(l.id),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all duration-300 w-16 ${t?"text-emerald-600":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx(l.icon,{className:`w-6 h-6 transition-transform ${t?"scale-110":""}`,strokeWidth:t?2.5:2}),e.jsx("span",{className:`text-[10px] font-medium ${t?"font-bold":""}`,children:l.label})]},l.id)})})})},Pa=({isOpen:a,onClose:r,type:n="info",title:l,message:t,actionLabel:i,onAction:b})=>{const[o,d]=c.useState(!1);if(c.useEffect(()=>{a?d(!0):setTimeout(()=>d(!1),300)},[a]),!o&&!a)return null;const x=(()=>{switch(n){case"success":return{icon:e.jsx(Ne,{className:"w-8 h-8 text-emerald-500"}),bgIcon:"bg-emerald-100",btn:"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-500/20",border:"border-emerald-100"};case"warning":return{icon:e.jsx(sa,{className:"w-8 h-8 text-amber-500"}),bgIcon:"bg-amber-100",btn:"bg-amber-500 hover:bg-amber-600 shadow-amber-500/20",border:"border-amber-100"};case"error":return{icon:e.jsx(aa,{className:"w-8 h-8 text-red-500"}),bgIcon:"bg-red-100",btn:"bg-red-600 hover:bg-red-700 shadow-red-500/20",border:"border-red-100"};default:return{icon:e.jsx(ke,{className:"w-8 h-8 text-blue-500"}),bgIcon:"bg-blue-100",btn:"bg-blue-600 hover:bg-blue-700 shadow-blue-500/20",border:"border-blue-100"}}})();return e.jsxs("div",{className:`fixed inset-0 z-[60] flex items-center justify-center p-4 transition-opacity duration-300 ${a?"opacity-100":"opacity-0 pointer-events-none"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:r}),e.jsxs("div",{className:`relative w-full max-w-sm bg-white rounded-2xl shadow-2xl transform transition-all duration-300 ${a?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-slate-300 hover:text-slate-500 transition-colors bg-slate-50 p-1 rounded-full",children:e.jsx(J,{className:"w-5 h-5"})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:`mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4 ${x.bgIcon} ${x.border} border-4`,children:x.icon}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:l}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed mb-6",children:t}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[b&&i&&e.jsx("button",{onClick:b,className:`flex-1 py-2.5 px-4 rounded-xl text-white font-bold text-sm shadow-lg transition-all transform hover:-translate-y-0.5 ${x.btn}`,children:i}),e.jsx("button",{onClick:r,className:`flex-1 py-2.5 px-4 rounded-xl font-bold text-sm transition-colors border border-slate-200 hover:bg-slate-50 text-slate-600 ${b?"":"w-full"}`,children:"Tutup"})]})]}),e.jsx("div",{className:`h-1.5 w-full rounded-b-2xl ${x.bgIcon.replace("bg-","bg-gradient-to-r from-white via-").replace("100","500").concat(" to-white")}`})]})]})},Ea=({data:a})=>{const[r,n]=c.useState(!1),[l,t]=c.useState(null);c.useEffect(()=>{if(a&&a.length>0){const b=a[0];sessionStorage.getItem(`seen_popup_${b.id}`)||(t(b),setTimeout(()=>n(!0),1e3))}},[a]);const i=()=>{n(!1),l&&sessionStorage.setItem(`seen_popup_${l.id}`,"true")};return!r||!l?null:e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 animate-fade-in",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/70 backdrop-blur-sm transition-opacity",onClick:i}),e.jsxs("div",{className:"relative w-full max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden animate-scale-up",children:[l.image&&e.jsxs("div",{className:"w-full h-48 bg-slate-100 overflow-hidden relative",children:[e.jsx("img",{src:l.image,alt:l.title,className:"w-full h-full object-cover",onError:b=>b.target.style.display="none"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"})]}),e.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/40 backdrop-blur-md rounded-full text-white transition-all shadow-lg z-10",children:e.jsx(J,{className:"w-5 h-5"})}),e.jsxs("div",{className:"p-6 pt-6",children:[!l.image&&e.jsx("div",{className:"h-4"}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2 leading-tight",children:l.title}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed mb-6 whitespace-pre-line",children:l.subtitle}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:i,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-colors text-sm",children:"Tutup"}),l.url&&e.jsxs("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2.5 bg-gradient-to-r from-emerald-600 to-lime-600 text-white font-bold rounded-xl hover:from-emerald-700 hover:to-lime-700 transition-all shadow-lg shadow-emerald-200 text-sm flex items-center justify-center gap-2",children:["Buka Link ",e.jsx(fe,{className:"w-4 h-4"})]})]})]})]})]})};function $a(){const[a,r]=c.useState("home"),[n,l]=c.useState("home"),[t,i]=c.useState([]),[b,o]=c.useState([]),[d,y]=c.useState([]),[x,k]=c.useState("Semua"),[j,R]=c.useState({}),[F,L]=c.useState(!1),[N,A]=c.useState({sliders:[],quickLinks:[],momentLinks:[],popups:[]}),[q,g]=c.useState([]),[S,P]=c.useState(null),[Q,ee]=c.useState(!0),[ne,Z]=c.useState(""),[te,K]=c.useState(!1),[$,G]=c.useState({nama:"",kontak:"",pesan:""}),[O,W]=c.useState(!1),[E,m]=c.useState(null),[h,f]=c.useState(null),[D,T]=c.useState({isOpen:!1,type:"info",title:"",message:"",actionLabel:"",onAction:null}),_=p=>{T({isOpen:!0,...p})};c.useEffect(()=>{(async()=>{ee(!0);try{console.log("ðŸš€ Memulai inisialisasi data...");const C=async(M,$e,xe)=>{try{const he=await fetch(M);if(!he.ok)throw new Error(`Static ${xe} not found (${he.status})`);const ae=await he.json();return console.log(`âœ… Loaded ${xe}: Static JSON (Cache)`),ae}catch{if(console.warn(`âš ï¸ Static ${xe} missing/error, fetching live...`),typeof $e=="function"){const ae=await $e(),pe=ae&&ae.data?ae.data:ae;return console.log(`âœ… Loaded ${xe}: Live API`),pe}return null}},[H,s,u,w]=await Promise.all([C("/data/services.json",be.getServices,"Services"),C("/data/form-config.json",be.getFormConfig,"Form Config"),C("/data/content.json",be.getAppContent,"App Content"),C("/data/faq.json",be.getFAQ,"FAQ")]),v=Array.isArray(H)?H:[];i(v),o(v),console.log(`ðŸ“Š Services count: ${v.length}`),R(s||{}),A(u||{sliders:[],quickLinks:[],momentLinks:[],popups:[]});const ye=Array.isArray(w)?w:[];g(ye);const U=["Semua",...new Set(v.map(M=>M.kategori))];y(U)}catch(C){console.error("Init Error Detail:",C),_({type:"error",title:"Gagal Memuat Data",message:"Gagal terhubung ke server. Pastikan koneksi internet stabil.",actionLabel:"Muat Ulang",onAction:()=>window.location.reload()})}finally{ee(!1)}})()},[]),c.useEffect(()=>{const p=t.filter(C=>{const H=C.jenis_layanan&&C.jenis_layanan.toLowerCase().includes(ne.toLowerCase()),s=x==="Semua"||C.kategori===x;return H&&s});o(p)},[ne,x,t]);const I=p=>{const C=p.jenis?p.jenis.trim().toLowerCase():"",H=p.form_type?p.form_type.trim().toLowerCase():"";if(C==="link"||H==="link"){let s=p.link_template||p.link||"";s=s.toString().trim(),s&&s!=="-"&&s!=="#"?(/^https?:\/\//i.test(s)||(s="https://"+s),window.open(s,"_blank")):_({type:"warning",title:"Tautan Tidak Tersedia",message:`Layanan "${p.jenis_layanan}" terdeteksi sebagai Link, namun URL tujuan kosong atau tidak valid.`});return}m(null),f(null),P(p),document.body.style.overflow="hidden"},z=(p,C,H)=>{const s=t.find(u=>String(u.id)===String(p));if(s)try{const u=typeof C=="string"?JSON.parse(C):C;m(u),f(H),P(s),document.body.style.overflow="hidden"}catch(u){console.error("Gagal parse data revisi:",u),_({type:"error",title:"Gagal Memuat Data",message:"Data pengajuan sebelumnya tidak valid atau rusak."})}else _({type:"error",title:"Layanan Tidak Ditemukan",message:"Jenis layanan untuk pengajuan ini mungkin sudah tidak aktif."})},re=()=>{P(null),m(null),f(null),document.body.style.overflow="unset"},ve=()=>{r("faq"),l("faq"),window.scrollTo({top:0,behavior:"smooth"})},ie=()=>{r("home"),l("home"),window.scrollTo({top:0,behavior:"smooth"})},me=()=>{Z(""),k("Semua"),L(!1)},oe=async p=>{p.preventDefault(),W(!0);try{await fetch(be,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"submitMessage",nama:$.nama,kontak:$.kontak,pesan:$.pesan})})}catch(u){console.error("Gagal menyimpan pesan ke database:",u)}const C=`Laporan Sistem Layanan IAIN Bone
Nama : ${$.nama}
Email : ${$.kontak}
Unit : ${$.unit||"-"}
Pesan :
${$.pesan}`,s=`https://wa.me/6285117769733?text=${encodeURIComponent(C)}`;window.open(s,"_blank"),K(!1),G({nama:"",kontak:"",pesan:""}),W(!1)},ue=p=>{if(l(p),p==="chat"){K(!0),l(a==="faq"?"faq":"home");return}p==="faq"?(r("faq"),window.scrollTo({top:0,behavior:"smooth"})):(a!=="home"&&r("home"),setTimeout(()=>{if(p==="home")window.scrollTo({top:0,behavior:"smooth"});else if(p==="services"){const C=document.getElementById("services-section");C&&C.scrollIntoView({behavior:"smooth",block:"start"})}else if(p==="track"){const C=document.getElementById("tracker-section");if(C){const H=C.getBoundingClientRect().top+window.scrollY-150;window.scrollTo({top:H,behavior:"smooth"})}}},100))};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50 font-sans relative",children:[e.jsx(da,{onLogoClick:ie,showHomeButton:a!=="home"}),e.jsx("main",{className:"flex-grow z-0 pb-20 md:pb-0",children:a==="home"?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"w-full bg-gradient-to-r from-emerald-600 to-lime-500 pb-10 shadow-lg mb-8 rounded-b-[50px]",children:e.jsxs("div",{className:"container mx-auto px-4 pt-6",children:[e.jsx("div",{className:"w-full aspect-[21/9] bg-slate-800 rounded-2xl overflow-hidden shadow-2xl relative [&_img]:w-full [&_img]:h-full [&_img]:object-cover z-0",children:e.jsx(ya,{slides:N.sliders})}),e.jsx("div",{id:"tracker-section",className:"mt-6 md:mt-8",children:e.jsx(Ta,{onResubmit:z})})]})}),e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(Da,{links:N.momentLinks}),e.jsx(Ca,{links:N.quickLinks}),e.jsxs("div",{id:"services-section",className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6 pt-4 border-t border-slate-200/60 mt-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx("span",{className:"w-1.5 h-8 bg-emerald-500 rounded-full"}),e.jsxs("span",{className:"flex flex-col",children:["Layanan Tersedia",e.jsx("span",{className:"text-xs font-normal text-slate-400",children:"Pilih layanan yang Anda butuhkan"})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-grow md:w-64",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsx("input",{type:"text",placeholder:"Cari layanan...",value:ne,onChange:p=>Z(p.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all shadow-sm"})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative h-full w-12 md:w-48",children:[e.jsx("select",{value:x,onChange:p=>k(p.target.value),className:"appearance-none w-full h-full bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-600 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent cursor-pointer absolute inset-0 opacity-0 z-20 md:static md:opacity-100 md:py-2.5 md:pl-10 md:pr-10",children:d.map(p=>e.jsx("option",{value:p,className:"text-slate-600",children:p},p))}),e.jsxs("div",{className:`absolute inset-0 flex items-center justify-center pointer-events-none z-10 md:justify-start md:px-3 ${x!=="Semua"?"text-emerald-600":"text-slate-400"}`,children:[e.jsx("div",{className:`md:hidden flex items-center justify-center w-full h-full bg-white border border-slate-200 rounded-lg ${x!=="Semua"?"bg-emerald-50 border-emerald-500 text-emerald-600":""}`,children:e.jsx(Ie,{className:"w-5 h-5"})}),e.jsx(Ie,{className:"w-5 h-5 hidden md:block absolute left-3"}),e.jsx(Se,{className:"w-4 h-4 text-slate-400 hidden md:block absolute right-3"})]})]})}),e.jsx("button",{onClick:me,className:"flex items-center justify-center w-12 h-full py-2.5 rounded-lg border bg-white text-slate-400 border-slate-200 hover:border-red-400 hover:text-red-500 hover:bg-red-50 transition-all shadow-sm",title:"Reset Pencarian & Filter",children:e.jsx(la,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>L(!F),className:`flex items-center justify-center w-12 h-full py-2.5 rounded-lg border transition-all shadow-sm ${F?"bg-emerald-600 text-white border-emerald-600":"bg-white text-slate-500 border-slate-200 hover:border-emerald-500 hover:text-emerald-600"}`,title:F?"Tampilan Lengkap":"Tampilan Ringkas",children:F?e.jsx(na,{className:"w-5 h-5"}):e.jsx(Ut,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"min-h-[300px] pb-16 sm:pb-24 border-b border-slate-200/60 mb-8",children:Q?e.jsx("div",{className:`grid gap-4 sm:gap-6 ${F?"grid-cols-3 md:grid-cols-4 lg:grid-cols-6":"grid-cols-2 md:grid-cols-3 lg:grid-cols-5"}`,children:[1,2,3,4,5].map(p=>e.jsx("div",{className:`bg-slate-200 rounded-xl animate-pulse ${F?"h-32":"h-40 sm:h-48"}`},p))}):e.jsx("div",{className:`grid gap-4 sm:gap-6 ${F?"grid-cols-3 md:grid-cols-4 lg:grid-cols-6":"grid-cols-2 md:grid-cols-3 lg:grid-cols-5"}`,children:b.length>0?b.map(p=>e.jsx("div",{onClick:()=>I(p),className:"cursor-pointer transition hover:-translate-y-1",children:e.jsx(ua,{service:p,isCompact:F})},p.id)):e.jsxs("div",{className:"col-span-full py-16 text-center",children:[e.jsx(X,{className:"w-8 h-8 text-slate-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-slate-600 font-bold mb-1",children:"Layanan tidak ditemukan"})]})})}),e.jsx(Fa,{data:q,onSeeMore:ve})]})]}):e.jsx(Aa,{data:q,onBack:ie,onShowNotification:p=>_({type:"info",title:"Info",message:p})})}),e.jsx(ca,{}),e.jsx("div",{className:"h-20 md:hidden bg-transparent"}),e.jsx("button",{onClick:()=>K(!0),className:"fixed bottom-24 right-8 z-40 hidden md:flex items-center justify-center w-14 h-14 bg-gradient-to-r from-emerald-500 to-lime-500 text-white rounded-full shadow-lg hover:from-emerald-600 hover:to-lime-600 transition-all hover:scale-110 hover:shadow-emerald-500/40",children:e.jsx(se,{className:"w-7 h-7"})}),te&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 animate-fade-in",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>!O&&K(!1)}),e.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl p-6 animate-scale-up",children:[e.jsx("button",{disabled:O,onClick:()=>K(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-red-500 transition-colors p-1 hover:bg-slate-50 rounded-full disabled:opacity-50",children:e.jsx(J,{className:"w-6 h-6"})}),e.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx(se,{className:"w-6 h-6 text-emerald-500"}),"Hubungi Kami via WhatsApp"]}),e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Nama"}),e.jsx("input",{required:!0,disabled:O,type:"text",value:$.nama,onChange:p=>G({...$,nama:p.target.value}),className:"w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all placeholder:text-slate-400 disabled:bg-slate-100 disabled:text-slate-500",placeholder:"Nama Lengkap"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Silahkan pilih Unit Kerja Layanan"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{required:!0,disabled:O,value:$.unit||"",onChange:p=>G({...$,unit:p.target.value}),className:"w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all bg-white text-slate-700 disabled:bg-slate-100 disabled:text-slate-500 appearance-none",children:[e.jsx("option",{value:"",disabled:!0,children:"-- Pilih Unit Tujuan --"}),e.jsx("option",{value:"Subbagian Tata Usaha Perlengkapan dan Rumah Tangga",children:"Subbagian Tata Usaha Perlengkapan dan Rumah Tangga"}),e.jsx("option",{value:"Subbagian Layanan Akademik",children:"Subbagian Layanan Akademik"}),e.jsx("option",{value:"Fungsi Organisasi, Kepegawaian dan Hukum",children:"Fungsi Organisasi, Kepegawaian dan Hukum"}),e.jsx("option",{value:"Fungsi Perencanaan",children:"Fungsi Perencanaan"}),e.jsx("option",{value:"Fungsi Keuangan",children:"Fungsi Keuangan"}),e.jsx("option",{value:"Fakultas Syariah dan Hukum Islam",children:"Fakultas Syariah dan Hukum Islam"}),e.jsx("option",{value:"Fakultas Tarbiyah",children:"Fakultas Tarbiyah"}),e.jsx("option",{value:"Fakultas Ekonomi dan Bisnis Islam",children:"Fakultas Ekonomi dan Bisnis Islam"}),e.jsx("option",{value:"Fakultas Ushuluddin dan Dakwah",children:"Fakultas Ushuluddin dan Dakwah"}),e.jsx("option",{value:"Pascasarjana",children:"Pascasarjana"}),e.jsx("option",{value:"Lembaga Penjaminan Mutu",children:"Lembaga Penjaminan Mutu"}),e.jsx("option",{value:"Lembaga Penelitian dan Pengabdian Masyarakat",children:"Lembaga Penelitian dan Pengabdian Masyarakat"}),e.jsx("option",{value:"Satuan Pengawasan Internal",children:"Satuan Pengawasan Internal"}),e.jsx("option",{value:"UPT TIPD",children:"UPT TIPD"}),e.jsx("option",{value:"UPT Perpustakaan",children:"UPT Perpustakaan"}),e.jsx("option",{value:"UPT Bahasa",children:"UPT Bahasa"}),e.jsx("option",{value:"UPT Mahad Al Jamiah",children:"UPT Mahad Al Jamiah"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-slate-500",children:e.jsx("svg",{className:"w-4 h-4 fill-current",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd",fillRule:"evenodd"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Kontak"}),e.jsx("input",{required:!0,disabled:O,type:"text",value:$.kontak,onChange:p=>G({...$,kontak:p.target.value}),className:"w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all placeholder:text-slate-400 disabled:bg-slate-100 disabled:text-slate-500",placeholder:"Email atau No. HP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Pesan"}),e.jsx("textarea",{required:!0,disabled:O,rows:"4",value:$.pesan,onChange:p=>G({...$,pesan:p.target.value}),className:"w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all placeholder:text-slate-400 resize-none disabled:bg-slate-100 disabled:text-slate-500",placeholder:"Tulis pesan atau laporan Anda..."})]}),e.jsx("button",{type:"submit",disabled:O,className:"w-full py-3 bg-gradient-to-r from-emerald-500 to-lime-500 hover:from-emerald-600 hover:to-lime-600 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/40 transition-all transform hover:-translate-y-0.5 active:translate-y-0 flex items-center justify-center gap-2 mt-2 disabled:opacity-70 disabled:cursor-wait disabled:transform-none",children:O?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5 animate-spin"}),"Memproses..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-5 h-5"}),"Chat ke WA"]})})]})]})]}),e.jsx(La,{activeTab:n,onNavigate:ue}),e.jsx(Pa,{isOpen:D.isOpen,...D,onClose:()=>T(p=>({...p,isOpen:!1}))}),e.jsx(Ea,{data:N.popups}),S&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity animate-fade-in",onClick:re}),e.jsxs("div",{className:"relative w-full h-full sm:h-auto sm:max-h-[90vh] sm:max-w-5xl overflow-y-auto bg-white sm:rounded-2xl shadow-2xl z-10 animate-slide-up sm:animate-fade-in-up scrollbar-hide",children:[e.jsx("button",{onClick:re,className:"hidden sm:block absolute top-4 right-4 z-20 p-2 bg-white/80 rounded-full text-slate-400 hover:text-red-500 hover:bg-white transition shadow-sm border border-transparent hover:border-slate-200",children:e.jsx(J,{className:"w-5 h-5"})}),e.jsx(va,{service:S,onBack:re,templates:j,initialData:E,existingTicketId:h})]})]})]})}ra.createRoot(document.getElementById("root")).render(e.jsx(ia.StrictMode,{children:e.jsx($a,{})}));
